
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.4">
    
    
      
        <title>Planner - pyastrobee</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.80dcb947.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="pink">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-pyastrobeetrajectoriesplanner" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="pyastrobee" class="md-header__button md-logo" aria-label="pyastrobee" data-md-component="logo">
      
  <img src="../../../../images/favicon_large.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyastrobee
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Planner
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/danielpmorton/pyastrobee" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pyastrobee
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="pyastrobee" class="md-nav__button md-logo" aria-label="pyastrobee" data-md-component="logo">
      
  <img src="../../../../images/favicon_large.png" alt="logo">

    </a>
    pyastrobee
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/danielpmorton/pyastrobee" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pyastrobee
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/additional_installs/" class="md-nav__link">
        Additional Installs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/bag_dynamics/" class="md-nav__link">
        Bag Dynamics
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/loading_iss_meshes/" class="md-nav__link">
        Loading Iss Meshes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/meshing/" class="md-nav__link">
        Meshing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/nasa_sim/" class="md-nav__link">
        Nasa Sim
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/pybullet_tips/" class="md-nav__link">
        Pybullet Tips
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/references/" class="md-nav__link">
        References
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/retexturing/" class="md-nav__link">
        Retexturing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/tet_meshing/" class="md-nav__link">
        Tet Meshing
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1" type="checkbox" id="__nav_13_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1">
          Pyastrobee
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pyastrobee" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_1">
          <span class="md-nav__icon md-icon"></span>
          Pyastrobee
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_2" type="checkbox" id="__nav_13_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_2">
          Config
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Config" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_2">
          <span class="md-nav__icon md-icon"></span>
          Config
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/astrobee_geom/" class="md-nav__link">
        Astrobee Geom
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/astrobee_motion/" class="md-nav__link">
        Astrobee Motion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/astrobee_transforms/" class="md-nav__link">
        Astrobee Transforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/bag_properties/" class="md-nav__link">
        Bag Properties
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/iss_paths/" class="md-nav__link">
        Iss Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/iss_safe_boxes/" class="md-nav__link">
        Iss Safe Boxes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_3" type="checkbox" id="__nav_13_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_3">
          Control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Control" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_3">
          <span class="md-nav__icon md-icon"></span>
          Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/constraint_controller/" class="md-nav__link">
        Constraint Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/force_torque_control/" class="md-nav__link">
        Force Torque Control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/keyboard_controller/" class="md-nav__link">
        Keyboard Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/metrics/" class="md-nav__link">
        Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/multi_robot/" class="md-nav__link">
        Multi Robot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/sampling_mpc/" class="md-nav__link">
        Sampling Mpc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/sampling_mpc_multithreaded/" class="md-nav__link">
        Sampling Mpc Multithreaded
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_4" type="checkbox" id="__nav_13_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_4">
          Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_4">
          <span class="md-nav__icon md-icon"></span>
          Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/abstract_bag/" class="md-nav__link">
        Abstract Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/astrobee/" class="md-nav__link">
        Astrobee
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/composite_bag/" class="md-nav__link">
        Composite Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/constraint_bag/" class="md-nav__link">
        Constraint Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/deformable_bag/" class="md-nav__link">
        Deformable Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/environments/" class="md-nav__link">
        Environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/hybrid_bag/" class="md-nav__link">
        Hybrid Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/iss/" class="md-nav__link">
        Iss
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/rigid_bag/" class="md-nav__link">
        Rigid Bag
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_5" type="checkbox" id="__nav_13_1_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_5">
          Trajectories
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Trajectories" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_5">
          <span class="md-nav__icon md-icon"></span>
          Trajectories
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../arm_planner/" class="md-nav__link">
        Arm Planner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bezier/" class="md-nav__link">
        Bezier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bezier_slerp/" class="md-nav__link">
        Bezier Slerp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../box_paths/" class="md-nav__link">
        Box Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../curve_utils/" class="md-nav__link">
        Curve Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../decasteljau_slerp/" class="md-nav__link">
        Decasteljau Slerp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../face_forward/" class="md-nav__link">
        Face Forward
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multi_robot_trajs/" class="md-nav__link">
        Multi Robot Trajs
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Planner
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Planner
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global_planner" class="md-nav__link">
    global_planner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local_planner" class="md-nav__link">
    local_planner
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../polynomials/" class="md-nav__link">
        Polynomials
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quaternion_interpolation/" class="md-nav__link">
        Quaternion Interpolation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../simple_trajectories/" class="md-nav__link">
        Simple Trajectories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../splines/" class="md-nav__link">
        Splines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../timing/" class="md-nav__link">
        Timing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trajectory/" class="md-nav__link">
        Trajectory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../variable_time_curves/" class="md-nav__link">
        Variable Time Curves
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_6" type="checkbox" id="__nav_13_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_6">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utils" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_6">
          <span class="md-nav__icon md-icon"></span>
          Utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/algos/" class="md-nav__link">
        Algos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/bag_frame/" class="md-nav__link">
        Bag Frame
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/boxes/" class="md-nav__link">
        Boxes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/bullet_utils/" class="md-nav__link">
        Bullet Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/debug_visualizer/" class="md-nav__link">
        Debug Visualizer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/dynamics/" class="md-nav__link">
        Dynamics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/errors/" class="md-nav__link">
        Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/math_utils/" class="md-nav__link">
        Math Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/mesh_utils/" class="md-nav__link">
        Mesh Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/poses/" class="md-nav__link">
        Poses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/python_utils/" class="md-nav__link">
        Python Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/quaternion_derivatives/" class="md-nav__link">
        Quaternion Derivatives
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/quaternions/" class="md-nav__link">
        Quaternions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/rotations/" class="md-nav__link">
        Rotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/transformations/" class="md-nav__link">
        Transformations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/video_concatenation/" class="md-nav__link">
        Video Concatenation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global_planner" class="md-nav__link">
    global_planner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local_planner" class="md-nav__link">
    local_planner
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/danielpmorton/pyastrobee/edit/main/reference/pyastrobee/trajectories/planner.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="module-pyastrobeetrajectoriesplanner">Module pyastrobee.trajectories.planner</h1>
<p>The main trajectory planning structure for Astrobee</p>
<p>We use a global/local hierarchy where: </p>
<ul>
<li>The global planner computes a reference trajectory which enforces all of the required constraints, such as Astrobee's
  speed/acceleration limits, as well as collision avoidance</li>
<li>The local planner handles very fast trajectory generation between states with arbitrary boundary conditions on 
  dynamics, but does not enforce some of the more computationally intensive optimizations and constraints</li>
</ul>
<p>This also assumes decoupled dynamics between the position and orientation components</p>
<p>Note: the orientation component of the trajectories technically isn't "optimal", but it works</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="sd">&quot;&quot;&quot;The main trajectory planning structure for Astrobee</span>

<span class="sd">We use a global/local hierarchy where:</span>

<span class="sd">- The global planner computes a reference trajectory which enforces all of the required constraints, such as Astrobee&#39;s</span>

<span class="sd">  speed/acceleration limits, as well as collision avoidance</span>

<span class="sd">- The local planner handles very fast trajectory generation between states with arbitrary boundary conditions on</span>

<span class="sd">  dynamics, but does not enforce some of the more computationally intensive optimizations and constraints</span>

<span class="sd">This also assumes decoupled dynamics between the position and orientation components</span>

<span class="sd">Note: the orientation component of the trajectories technically isn&#39;t &quot;optimal&quot;, but it works</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># TODO add the max-angular-velocity-constrained rotation planner into the global planner (would only really be needed if</span>

<span class="c1"># we have a very short time horizon on the position component, i.e. if we&#39;re not moving much but rotating a lot)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">Optional</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy.typing</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">npt</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.trajectories.trajectory</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">Trajectory</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.trajectories.bezier</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">bezier_trajectory</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.trajectories.quaternion_interpolation</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="n">quaternion_interpolation_with_bcs</span><span class="p">,</span>

<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.utils.quaternions</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">quats_to_angular_velocities</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.trajectories.timing</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="n">spline_duration_heuristic</span><span class="p">,</span>

<span class="w">    </span><span class="n">rotation_duration_heuristic</span><span class="p">,</span>

<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.config.astrobee_motion</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">LINEAR_SPEED_LIMIT</span><span class="p">,</span><span class="w"> </span><span class="n">LINEAR_ACCEL_LIMIT</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.config.iss_safe_boxes</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">ROBOT_SAFE_SET</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.config.iss_paths</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">GRAPH</span><span class="p">,</span><span class="w"> </span><span class="n">PATHS</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.utils.boxes</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">Box</span><span class="p">,</span><span class="w"> </span><span class="n">find_containing_box_name</span><span class="p">,</span><span class="w"> </span><span class="n">compute_graph</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.utils.algos</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">dfs</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.trajectories.curve_utils</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">traj_from_curve</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.trajectories.variable_time_curves</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="p">(</span>

<span class="w">    </span><span class="n">free_final_time_bezier</span><span class="p">,</span>

<span class="w">    </span><span class="n">free_final_time_spline</span><span class="p">,</span>

<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">local_planner</span><span class="p">(</span>

<span class="w">    </span><span class="n">p0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">q0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">v0</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">w0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">a0</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">dw0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">pf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">qf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">vf</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">wf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">af</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">dwf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">duration</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span>

<span class="w">    </span><span class="n">dt</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Generate an optimal Bezier-curve-based position trajectory with a polynomial orientation component</span>

<span class="s2">    Note that this planner prioritizes solve time over constraint enforcement. This will plan with boundary conditions</span>

<span class="s2">    in mind, but other than that, it does not enforce things like speed/acceleration limits or collision avoidance. This</span>

<span class="s2">    allows us to use this in very fast online applications.</span>

<span class="s2">    In general, this should be paired with the global planner, so that we can precompute a reference trajectory which</span>

<span class="s2">    does enforce all constraints (and takes a bit longer to solve), and use this local planner to evaluate different</span>

<span class="s2">    rollouts between states along this reference trajectory</span>

<span class="s2">    Args:</span>

<span class="s2">        p0 (npt.ArrayLike): Initial position, shape (3,)</span>

<span class="s2">        q0 (npt.ArrayLike): Initial XYZW quaternion, shape (4,)</span>

<span class="s2">        v0 (npt.ArrayLike): Initial linear velocity, shape (3,)</span>

<span class="s2">        w0 (npt.ArrayLike): Initial angular velocity, shape (3,)</span>

<span class="s2">        a0 (npt.ArrayLike): Initial linear acceleration, shape (3,)</span>

<span class="s2">        dw0 (npt.ArrayLike): Initial angular acceleration, shape (3,)</span>

<span class="s2">        pf (npt.ArrayLike): Final position, shape (3,)</span>

<span class="s2">        qf (npt.ArrayLike): Final XYZW quaternion, shape (4,)</span>

<span class="s2">        vf (npt.ArrayLike): Final linear velocity, shape (3,)</span>

<span class="s2">        wf (npt.ArrayLike): Final angular velocity, shape (3,)</span>

<span class="s2">        af (npt.ArrayLike): Final linear acceleration, shape (3,)</span>

<span class="s2">        dwf (npt.ArrayLike): Final angular acceleration, shape (3,)</span>

<span class="s2">        duration (float): Trajectory duration (seconds)</span>

<span class="s2">        dt (float): Sampling period (seconds)</span>

<span class="s2">    Returns:</span>

<span class="s2">        Trajectory: The optimal local trajectory plan</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="c1"># Min-jerk position traj</span>

<span class="w">    </span><span class="c1"># Don&#39;t need a ton of control points because we&#39;re not enforcing constraints</span>

<span class="w">    </span><span class="n">n_control_pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span>

<span class="w">    </span><span class="n">curve</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bezier_trajectory</span><span class="p">(</span>

<span class="w">        </span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">n_control_pts</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">vf</span><span class="p">,</span><span class="w"> </span><span class="n">a0</span><span class="p">,</span><span class="w"> </span><span class="n">af</span><span class="p">,</span><span class="w"> </span><span class="n">time_weight</span><span class="o">=</span><span class="mi">0</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">pos_traj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">traj_from_curve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">n_timesteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>

<span class="w">    </span><span class="n">quats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quaternion_interpolation_with_bcs</span><span class="p">(</span>

<span class="w">        </span><span class="n">q0</span><span class="p">,</span><span class="w"> </span><span class="n">qf</span><span class="p">,</span><span class="w"> </span><span class="n">w0</span><span class="p">,</span><span class="w"> </span><span class="n">wf</span><span class="p">,</span><span class="w"> </span><span class="n">dw0</span><span class="p">,</span><span class="w"> </span><span class="n">dwf</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">n_timesteps</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">omega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quats_to_angular_velocities</span><span class="p">(</span><span class="n">quats</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">gradient</span><span class="p">(</span><span class="n">omega</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">(</span>

<span class="w">        </span><span class="n">positions</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">positions</span><span class="p">,</span>

<span class="w">        </span><span class="n">quats</span><span class="o">=</span><span class="n">quats</span><span class="p">,</span>

<span class="w">        </span><span class="n">lin_vels</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">linear_velocities</span><span class="p">,</span>

<span class="w">        </span><span class="n">ang_vels</span><span class="o">=</span><span class="n">omega</span><span class="p">,</span>

<span class="w">        </span><span class="n">lin_accels</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">linear_accels</span><span class="p">,</span>

<span class="w">        </span><span class="n">ang_accels</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span>

<span class="w">        </span><span class="n">times</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">times</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">global_planner</span><span class="p">(</span>

<span class="w">    </span><span class="n">p0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">q0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">pf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">qf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">dt</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span>

<span class="w">    </span><span class="n">safe_set</span><span class="p">:</span><span class="w"> </span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">Box</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROBOT_SAFE_SET</span><span class="p">,</span>

<span class="w">    </span><span class="n">graph</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GRAPH</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Generate an optimal spline-based position trajectory with a polynomial orientation component</span>

<span class="s2">    This will enforce all of the Astrobee&#39;s constraints (such as maximum velocity/acceleration and collision avoidance).</span>

<span class="s2">    It will also be time-optimal in the sense that 1) The total duration of the curve is minimized, and 2) each Bezier</span>

<span class="s2">    curve in the spline will have its relative duration (w.r.t. the total duration) optimized to minimize jerk</span>

<span class="s2">    Note that this can take on the order of 10 seconds to compute, so it is not something that should be called online</span>

<span class="s2">    Args:</span>

<span class="s2">        p0 (npt.ArrayLike): Initial position, shape (3,)</span>

<span class="s2">        q0 (npt.ArrayLike): Initial XYZW quaternion, shape (4,)</span>

<span class="s2">        pf (npt.ArrayLike): Final position, shape (3,)</span>

<span class="s2">        qf (npt.ArrayLike): Final XYZW quaternion, shape (4,)</span>

<span class="s2">        dt (float): Sampling period (seconds)</span>

<span class="s2">        safe_set (dict[str, Box], optional): Description of the safe set of the environment. Defaults to ROBOT_SAFE_SET</span>

<span class="s2">            (the precomputed safe-set decomposition for the ISS, accounting for the robot&#39;s collision radius)</span>

<span class="s2">        graph (Optional[dict[str, list[str]]], optional): The graph defining the connections between the safe boxes in</span>

<span class="s2">            the environment. Defaults to GRAPH (the precomputed safe-set graph for the ISS). Note: if set to None, this</span>

<span class="s2">            graph will be recomputed from the ROBOT_SAFE_SET parameter</span>

<span class="s2">    Returns:</span>

<span class="s2">        Trajectory: The optimal global trajectory plan</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="c1"># Dynamics parameters: Assume start and end from rest, satisfy operating limits</span>

<span class="w">    </span><span class="n">t0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="n">v0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">vf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">a0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">af</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">w0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">wf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">dw0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">dwf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">v_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LINEAR_SPEED_LIMIT</span>

<span class="w">    </span><span class="n">a_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LINEAR_ACCEL_LIMIT</span>

<span class="w">    </span><span class="c1"># Parameters associated with the retiming optimization or the free-final-time optimization</span>

<span class="w">    </span><span class="c1"># will be left at the default values for now</span>

<span class="w">    </span><span class="c1"># Determine the path through the safe-space graph</span>

<span class="w">    </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_containing_box_name</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">safe_set</span><span class="p">)</span>

<span class="w">    </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_containing_box_name</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span><span class="w"> </span><span class="n">safe_set</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">        </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">compute_graph</span><span class="p">(</span><span class="n">safe_set</span><span class="p">)</span>

<span class="w">    </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dfs</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">)</span>

<span class="w">    </span><span class="n">box_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">safe_set</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">path</span><span class="p">]</span>

<span class="w">    </span><span class="n">init_angular_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rotation_duration_heuristic</span><span class="p">(</span><span class="n">q0</span><span class="p">,</span><span class="w"> </span><span class="n">qf</span><span class="p">)</span>

<span class="w">    </span><span class="n">init_pos_duration</span><span class="p">,</span><span class="w"> </span><span class="n">init_timing_fractions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spline_duration_heuristic</span><span class="p">(</span>

<span class="w">        </span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="p">,</span><span class="w"> </span><span class="n">box_path</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># TODO enforce a minimum final time in the free-final-time optimization</span>

<span class="w">    </span><span class="c1"># to make sure that the rotation plan still has enough time to execute</span>

<span class="w">    </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">max</span><span class="p">(</span><span class="n">init_pos_duration</span><span class="p">,</span><span class="w"> </span><span class="n">init_angular_duration</span><span class="p">)</span>

<span class="w">    </span><span class="n">init_curve_durations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">init_timing_fractions</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">box_path</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Crank up the control points for a single Bezier curve so that we can be nice and tight</span>

<span class="w">        </span><span class="c1"># against the velocity/accel constraints</span>

<span class="w">        </span><span class="n">n_control_pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span>

<span class="w">        </span><span class="c1"># If our start and end positions are contained within the same free box,</span>

<span class="w">        </span><span class="c1"># we can construct the trajectory from a single Bezier curve</span>

<span class="w">        </span><span class="n">curve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">free_final_time_bezier</span><span class="p">(</span>

<span class="w">            </span><span class="n">p0</span><span class="p">,</span>

<span class="w">            </span><span class="n">pf</span><span class="p">,</span>

<span class="w">            </span><span class="n">t0</span><span class="p">,</span>

<span class="w">            </span><span class="n">duration</span><span class="p">,</span>

<span class="w">            </span><span class="n">n_control_pts</span><span class="p">,</span>

<span class="w">            </span><span class="n">v0</span><span class="p">,</span>

<span class="w">            </span><span class="n">vf</span><span class="p">,</span>

<span class="w">            </span><span class="n">a0</span><span class="p">,</span>

<span class="w">            </span><span class="n">af</span><span class="p">,</span>

<span class="w">            </span><span class="n">box_path</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>

<span class="w">            </span><span class="n">v_max</span><span class="p">,</span>

<span class="w">            </span><span class="n">a_max</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Our start/end positions are not in the same box, so use a spline between boxes</span>

<span class="w">        </span><span class="c1"># Use less control points for the spline for optimization stability</span>

<span class="w">        </span><span class="n">n_control_pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>

<span class="w">        </span><span class="n">curve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">free_final_time_spline</span><span class="p">(</span>

<span class="w">            </span><span class="n">p0</span><span class="p">,</span>

<span class="w">            </span><span class="n">pf</span><span class="p">,</span>

<span class="w">            </span><span class="n">t0</span><span class="p">,</span>

<span class="w">            </span><span class="n">duration</span><span class="p">,</span>

<span class="w">            </span><span class="n">n_control_pts</span><span class="p">,</span>

<span class="w">            </span><span class="n">box_path</span><span class="p">,</span>

<span class="w">            </span><span class="n">init_curve_durations</span><span class="p">,</span>

<span class="w">            </span><span class="n">v0</span><span class="p">,</span>

<span class="w">            </span><span class="n">vf</span><span class="p">,</span>

<span class="w">            </span><span class="n">a0</span><span class="p">,</span>

<span class="w">            </span><span class="n">af</span><span class="p">,</span>

<span class="w">            </span><span class="n">v_max</span><span class="p">,</span>

<span class="w">            </span><span class="n">a_max</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="n">pos_traj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">traj_from_curve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">n_timesteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos_traj</span><span class="o">.</span><span class="n">num_timesteps</span>

<span class="w">    </span><span class="n">quats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quaternion_interpolation_with_bcs</span><span class="p">(</span>

<span class="w">        </span><span class="n">q0</span><span class="p">,</span><span class="w"> </span><span class="n">qf</span><span class="p">,</span><span class="w"> </span><span class="n">w0</span><span class="p">,</span><span class="w"> </span><span class="n">wf</span><span class="p">,</span><span class="w"> </span><span class="n">dw0</span><span class="p">,</span><span class="w"> </span><span class="n">dwf</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">n_timesteps</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">omega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quats_to_angular_velocities</span><span class="p">(</span><span class="n">quats</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">gradient</span><span class="p">(</span><span class="n">omega</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">(</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="o">.</span><span class="n">positions</span><span class="p">,</span>

<span class="w">        </span><span class="n">quats</span><span class="p">,</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="o">.</span><span class="n">linear_velocities</span><span class="p">,</span>

<span class="w">        </span><span class="n">omega</span><span class="p">,</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="o">.</span><span class="n">linear_accels</span><span class="p">,</span>

<span class="w">        </span><span class="n">alpha</span><span class="p">,</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="o">.</span><span class="n">times</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>
</code></pre></div>

</details>
<h2 id="variables">Variables</h2>
<div class="codehilite"><pre><span></span><code><span class="n">GRAPH</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LINEAR_ACCEL_LIMIT</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">LINEAR_SPEED_LIMIT</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">PATHS</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">ROBOT_SAFE_SET</span>
</code></pre></div>

<h2 id="functions">Functions</h2>
<h3 id="global_planner">global_planner</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">global_planner</span><span class="p">(</span>
    <span class="n">p0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">q0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">pf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">qf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">safe_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pyastrobee</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">boxes</span><span class="o">.</span><span class="n">Box</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;jpm&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">3.47650494853664</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.4984950514633599</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">10.22349505146336</span><span class="p">,</span> <span class="mf">0.6354950514633599</span><span class="p">,</span> <span class="mf">0.7234950514633598</span><span class="p">]),</span> <span class="s1">&#39;node_2&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.18149505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.8234950514633599</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8234950514633599</span><span class="p">,</span> <span class="mf">0.8144950514633598</span><span class="p">,</span> <span class="mf">0.64749505146336</span><span class="p">]),</span> <span class="s1">&#39;eu_lab&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">7.42649505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5894950514633599</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">3.67650494853664</span><span class="p">,</span> <span class="mf">0.6484950514633598</span><span class="p">,</span> <span class="mf">0.7234950514633598</span><span class="p">]),</span> <span class="s1">&#39;us_lab&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.98849505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5974950514633599</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.0825049485366405</span><span class="p">,</span> <span class="mf">0.7234950514633598</span><span class="p">]),</span> <span class="s1">&#39;node_1&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.6754950514633598</span><span class="p">,</span> <span class="o">-</span><span class="mf">16.88849505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7234950514633598</span><span class="p">,</span> <span class="o">-</span><span class="mf">13.72550494853664</span><span class="p">,</span> <span class="mf">0.7514950514633598</span><span class="p">]),</span> <span class="s1">&#39;node_3_a&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">3.17650494853664</span><span class="p">,</span> <span class="o">-</span><span class="mf">15.31249505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">6.04549505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.97650494853664</span><span class="p">,</span> <span class="mf">0.3114950514633598</span><span class="p">]),</span> <span class="s1">&#39;node_3_b&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">5.234504948536641</span><span class="p">,</span> <span class="o">-</span><span class="mf">15.253495051463359</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.7234950514633598</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">7.3694950514633595</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.38350494853664</span><span class="p">,</span> <span class="mf">0.6624950514633599</span><span class="p">]),</span> <span class="s1">&#39;cupola&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">6.176504948536641</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.90349505146336</span><span class="p">,</span> <span class="mf">1.6435049485366402</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">6.3854950514633595</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.56150494853664</span><span class="p">,</span> <span class="mf">2.88149505146336</span><span class="p">]),</span> <span class="s1">&#39;jpm_n2_corridor&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3765049485366402</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.19849505146335983</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">4.523495051463359</span><span class="p">,</span> <span class="mf">0.19849505146335983</span><span class="p">,</span> <span class="mf">0.32349505146335983</span><span class="p">]),</span> <span class="s1">&#39;n2_eu_corridor&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">4.523495051463359</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.19849505146335983</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3765049485366402</span><span class="p">,</span> <span class="mf">0.19849505146335983</span><span class="p">,</span> <span class="mf">0.32349505146335983</span><span class="p">]),</span> <span class="s1">&#39;n2_us_corridor&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.62549505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">0.32349505146335983</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.6245049485366403</span><span class="p">,</span> <span class="mf">0.32349505146335983</span><span class="p">]),</span> <span class="s1">&#39;us_n1_corridor&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.07349505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">0.32349505146335983</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.47650494853664</span><span class="p">,</span> <span class="mf">0.32349505146335983</span><span class="p">]),</span> <span class="s1">&#39;n1_n3_corridor&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">0.17650494853664014</span><span class="p">,</span> <span class="o">-</span><span class="mf">15.12349505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32349505146335983</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">3.9034950514633597</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.67650494853664</span><span class="p">,</span> <span class="mf">0.32349505146335983</span><span class="p">]),</span> <span class="s1">&#39;n3_cupola_corridor&#39;</span><span class="p">:</span> <span class="n">Box</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="p">[</span><span class="mf">6.07650494853664</span><span class="p">,</span> <span class="o">-</span><span class="mf">15.144495051463359</span><span class="p">,</span> <span class="mf">0.39550494853664014</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="p">[</span><span class="mf">6.72349505146336</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.37650494853664</span><span class="p">,</span> <span class="mf">1.9024950514633596</span><span class="p">])},</span>
    <span class="n">graph</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cupola&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;n3_cupola_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;eu_lab&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;n2_eu_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;jpm&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;jpm_n2_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;jpm_n2_corridor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;jpm&#39;</span><span class="p">,</span> <span class="s1">&#39;node_2&#39;</span><span class="p">],</span> <span class="s1">&#39;n1_n3_corridor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;node_1&#39;</span><span class="p">,</span> <span class="s1">&#39;node_3_a&#39;</span><span class="p">],</span> <span class="s1">&#39;n2_eu_corridor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;node_2&#39;</span><span class="p">,</span> <span class="s1">&#39;eu_lab&#39;</span><span class="p">],</span> <span class="s1">&#39;n2_us_corridor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;node_2&#39;</span><span class="p">,</span> <span class="s1">&#39;us_lab&#39;</span><span class="p">],</span> <span class="s1">&#39;n3_cupola_corridor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;node_3_b&#39;</span><span class="p">,</span> <span class="s1">&#39;cupola&#39;</span><span class="p">],</span> <span class="s1">&#39;node_1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;us_n1_corridor&#39;</span><span class="p">,</span> <span class="s1">&#39;n1_n3_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;node_2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;jpm_n2_corridor&#39;</span><span class="p">,</span> <span class="s1">&#39;n2_eu_corridor&#39;</span><span class="p">,</span> <span class="s1">&#39;n2_us_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;node_3_a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;node_3_b&#39;</span><span class="p">,</span> <span class="s1">&#39;n1_n3_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;node_3_b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;node_3_a&#39;</span><span class="p">,</span> <span class="s1">&#39;n3_cupola_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;us_lab&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;n2_us_corridor&#39;</span><span class="p">,</span> <span class="s1">&#39;us_n1_corridor&#39;</span><span class="p">],</span> <span class="s1">&#39;us_n1_corridor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;us_lab&#39;</span><span class="p">,</span> <span class="s1">&#39;node_1&#39;</span><span class="p">]}</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pyastrobee</span><span class="o">.</span><span class="n">trajectories</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">Trajectory</span>
</code></pre></div>

<p>Generate an optimal spline-based position trajectory with a polynomial orientation component</p>
<p>This will enforce all of the Astrobee's constraints (such as maximum velocity/acceleration and collision avoidance).
It will also be time-optimal in the sense that 1) The total duration of the curve is minimized, and 2) each Bezier
curve in the spline will have its relative duration (w.r.t. the total duration) optimized to minimize jerk</p>
<p>Note that this can take on the order of 10 seconds to compute, so it is not something that should be called online</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>p0</td>
<td>npt.ArrayLike</td>
<td>Initial position, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>q0</td>
<td>npt.ArrayLike</td>
<td>Initial XYZW quaternion, shape (4,)</td>
<td>None</td>
</tr>
<tr>
<td>pf</td>
<td>npt.ArrayLike</td>
<td>Final position, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>qf</td>
<td>npt.ArrayLike</td>
<td>Final XYZW quaternion, shape (4,)</td>
<td>None</td>
</tr>
<tr>
<td>dt</td>
<td>float</td>
<td>Sampling period (seconds)</td>
<td>None</td>
</tr>
<tr>
<td>safe_set</td>
<td>dict[str, Box]</td>
<td>Description of the safe set of the environment. Defaults to ROBOT_SAFE_SET<br>(the precomputed safe-set decomposition for the ISS, accounting for the robot's collision radius)</td>
<td>None</td>
</tr>
<tr>
<td>graph</td>
<td>Optional[dict[str, list[str]]]</td>
<td>The graph defining the connections between the safe boxes in<br>the environment. Defaults to GRAPH (the precomputed safe-set graph for the ISS). Note: if set to None, this<br>graph will be recomputed from the ROBOT_SAFE_SET parameter</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trajectory</td>
<td>The optimal global trajectory plan</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">global_planner</span><span class="p">(</span>

<span class="w">    </span><span class="nl">p0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">q0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">pf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">qf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">dt</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="p">,</span>

<span class="w">    </span><span class="nl">safe_set</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="o">[</span><span class="n">str, Box</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROBOT_SAFE_SET</span><span class="p">,</span>

<span class="w">    </span><span class="nl">graph</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">dict[str, list[str</span><span class="o">]</span><span class="err">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GRAPH</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">Trajectory</span><span class="p">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Generate an optimal spline-based position trajectory with a polynomial orientation component</span>

<span class="ss">    This will enforce all of the Astrobee&#39;s constraints (such as maximum velocity/acceleration and collision avoidance).</span>

<span class="ss">    It will also be time-optimal in the sense that 1) The total duration of the curve is minimized, and 2) each Bezier</span>

<span class="ss">    curve in the spline will have its relative duration (w.r.t. the total duration) optimized to minimize jerk</span>

<span class="ss">    Note that this can take on the order of 10 seconds to compute, so it is not something that should be called online</span>

<span class="ss">    Args:</span>

<span class="ss">        p0 (npt.ArrayLike): Initial position, shape (3,)</span>

<span class="ss">        q0 (npt.ArrayLike): Initial XYZW quaternion, shape (4,)</span>

<span class="ss">        pf (npt.ArrayLike): Final position, shape (3,)</span>

<span class="ss">        qf (npt.ArrayLike): Final XYZW quaternion, shape (4,)</span>

<span class="ss">        dt (float): Sampling period (seconds)</span>

<span class="ss">        safe_set (dict[str, Box], optional): Description of the safe set of the environment. Defaults to ROBOT_SAFE_SET</span>

<span class="ss">            (the precomputed safe-set decomposition for the ISS, accounting for the robot&#39;s collision radius)</span>

<span class="ss">        graph (Optional[dict[str, list[str]]], optional): The graph defining the connections between the safe boxes in</span>

<span class="ss">            the environment. Defaults to GRAPH (the precomputed safe-set graph for the ISS). Note: if set to None, this</span>

<span class="ss">            graph will be recomputed from the ROBOT_SAFE_SET parameter</span>

<span class="ss">    Returns:</span>

<span class="ss">        Trajectory: The optimal global trajectory plan</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Dynamics</span><span class="w"> </span><span class="k">parameters</span><span class="err">:</span><span class="w"> </span><span class="n">Assume</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">rest</span><span class="p">,</span><span class="w"> </span><span class="n">satisfy</span><span class="w"> </span><span class="n">operating</span><span class="w"> </span><span class="n">limits</span>

<span class="w">    </span><span class="n">t0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="n">v0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">vf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">a0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">af</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">w0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">wf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">dw0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">dwf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="w">    </span><span class="n">v_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LINEAR_SPEED_LIMIT</span>

<span class="w">    </span><span class="n">a_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LINEAR_ACCEL_LIMIT</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="k">Parameters</span><span class="w"> </span><span class="n">associated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">retiming</span><span class="w"> </span><span class="n">optimization</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">free</span><span class="o">-</span><span class="n">final</span><span class="o">-</span><span class="nc">time</span><span class="w"> </span><span class="n">optimization</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="nf">left</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">now</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Determine</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">safe</span><span class="o">-</span><span class="nf">space</span><span class="w"> </span><span class="n">graph</span>

<span class="w">    </span><span class="k">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_containing_box_name</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">safe_set</span><span class="p">)</span>

<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_containing_box_name</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span><span class="w"> </span><span class="n">safe_set</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">        </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">compute_graph</span><span class="p">(</span><span class="n">safe_set</span><span class="p">)</span>

<span class="w">    </span><span class="k">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dfs</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span><span class="w"> </span><span class="k">start</span><span class="p">,</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="n">box_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">safe_set[p</span><span class="o">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">path</span><span class="err">]</span>

<span class="w">    </span><span class="n">init_angular_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rotation_duration_heuristic</span><span class="p">(</span><span class="n">q0</span><span class="p">,</span><span class="w"> </span><span class="n">qf</span><span class="p">)</span>

<span class="w">    </span><span class="n">init_pos_duration</span><span class="p">,</span><span class="w"> </span><span class="n">init_timing_fractions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spline_duration_heuristic</span><span class="p">(</span>

<span class="w">        </span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="p">,</span><span class="w"> </span><span class="n">box_path</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">TODO</span><span class="w"> </span><span class="n">enforce</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">minimum</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">free</span><span class="o">-</span><span class="n">final</span><span class="o">-</span><span class="nc">time</span><span class="w"> </span><span class="n">optimization</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rotation</span><span class="w"> </span><span class="k">plan</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">enough</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">execute</span>

<span class="w">    </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">init_pos_duration</span><span class="p">,</span><span class="w"> </span><span class="n">init_angular_duration</span><span class="p">)</span>

<span class="w">    </span><span class="n">init_curve_durations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">init_timing_fractions</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">box_path</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">Crank</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">Bezier</span><span class="w"> </span><span class="n">curve</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">nice</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">tight</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">velocity</span><span class="o">/</span><span class="n">accel</span><span class="w"> </span><span class="k">constraints</span>

<span class="w">        </span><span class="n">n_control_pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">positions</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="k">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">free</span><span class="w"> </span><span class="n">box</span><span class="p">,</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">construct</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trajectory</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">Bezier</span><span class="w"> </span><span class="n">curve</span>

<span class="w">        </span><span class="n">curve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">free_final_time_bezier</span><span class="p">(</span>

<span class="w">            </span><span class="n">p0</span><span class="p">,</span>

<span class="w">            </span><span class="n">pf</span><span class="p">,</span>

<span class="w">            </span><span class="n">t0</span><span class="p">,</span>

<span class="w">            </span><span class="n">duration</span><span class="p">,</span>

<span class="w">            </span><span class="n">n_control_pts</span><span class="p">,</span>

<span class="w">            </span><span class="n">v0</span><span class="p">,</span>

<span class="w">            </span><span class="n">vf</span><span class="p">,</span>

<span class="w">            </span><span class="n">a0</span><span class="p">,</span>

<span class="w">            </span><span class="n">af</span><span class="p">,</span>

<span class="w">            </span><span class="n">box_path</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">,</span>

<span class="w">            </span><span class="n">v_max</span><span class="p">,</span>

<span class="w">            </span><span class="n">a_max</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="err">:</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">Our</span><span class="w"> </span><span class="k">start</span><span class="o">/</span><span class="k">end</span><span class="w"> </span><span class="n">positions</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">box</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">spline</span><span class="w"> </span><span class="ow">between</span><span class="w"> </span><span class="n">boxes</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="k">less</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">spline</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">optimization</span><span class="w"> </span><span class="n">stability</span>

<span class="w">        </span><span class="n">n_control_pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>

<span class="w">        </span><span class="n">curve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">free_final_time_spline</span><span class="p">(</span>

<span class="w">            </span><span class="n">p0</span><span class="p">,</span>

<span class="w">            </span><span class="n">pf</span><span class="p">,</span>

<span class="w">            </span><span class="n">t0</span><span class="p">,</span>

<span class="w">            </span><span class="n">duration</span><span class="p">,</span>

<span class="w">            </span><span class="n">n_control_pts</span><span class="p">,</span>

<span class="w">            </span><span class="n">box_path</span><span class="p">,</span>

<span class="w">            </span><span class="n">init_curve_durations</span><span class="p">,</span>

<span class="w">            </span><span class="n">v0</span><span class="p">,</span>

<span class="w">            </span><span class="n">vf</span><span class="p">,</span>

<span class="w">            </span><span class="n">a0</span><span class="p">,</span>

<span class="w">            </span><span class="n">af</span><span class="p">,</span>

<span class="w">            </span><span class="n">v_max</span><span class="p">,</span>

<span class="w">            </span><span class="n">a_max</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="n">pos_traj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">traj_from_curve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">n_timesteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos_traj</span><span class="p">.</span><span class="n">num_timesteps</span>

<span class="w">    </span><span class="n">quats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quaternion_interpolation_with_bcs</span><span class="p">(</span>

<span class="w">        </span><span class="n">q0</span><span class="p">,</span><span class="w"> </span><span class="n">qf</span><span class="p">,</span><span class="w"> </span><span class="n">w0</span><span class="p">,</span><span class="w"> </span><span class="n">wf</span><span class="p">,</span><span class="w"> </span><span class="n">dw0</span><span class="p">,</span><span class="w"> </span><span class="n">dwf</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">n_timesteps</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">omega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quats_to_angular_velocities</span><span class="p">(</span><span class="n">quats</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">gradient</span><span class="p">(</span><span class="n">omega</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">(</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="p">.</span><span class="n">positions</span><span class="p">,</span>

<span class="w">        </span><span class="n">quats</span><span class="p">,</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="p">.</span><span class="n">linear_velocities</span><span class="p">,</span>

<span class="w">        </span><span class="n">omega</span><span class="p">,</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="p">.</span><span class="n">linear_accels</span><span class="p">,</span>

<span class="w">        </span><span class="n">alpha</span><span class="p">,</span>

<span class="w">        </span><span class="n">pos_traj</span><span class="p">.</span><span class="n">times</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="local_planner">local_planner</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">local_planner</span><span class="p">(</span>
    <span class="n">p0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">q0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">v0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]],</span> <span class="n">NoneType</span><span class="p">],</span>
    <span class="n">w0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">a0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]],</span> <span class="n">NoneType</span><span class="p">],</span>
    <span class="n">dw0</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">pf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">qf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">vf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]],</span> <span class="n">NoneType</span><span class="p">],</span>
    <span class="n">wf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">af</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]],</span> <span class="n">NoneType</span><span class="p">],</span>
    <span class="n">dwf</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pyastrobee</span><span class="o">.</span><span class="n">trajectories</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">Trajectory</span>
</code></pre></div>

<p>Generate an optimal Bezier-curve-based position trajectory with a polynomial orientation component</p>
<p>Note that this planner prioritizes solve time over constraint enforcement. This will plan with boundary conditions
in mind, but other than that, it does not enforce things like speed/acceleration limits or collision avoidance. This
allows us to use this in very fast online applications.</p>
<p>In general, this should be paired with the global planner, so that we can precompute a reference trajectory which
does enforce all constraints (and takes a bit longer to solve), and use this local planner to evaluate different
rollouts between states along this reference trajectory</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>p0</td>
<td>npt.ArrayLike</td>
<td>Initial position, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>q0</td>
<td>npt.ArrayLike</td>
<td>Initial XYZW quaternion, shape (4,)</td>
<td>None</td>
</tr>
<tr>
<td>v0</td>
<td>npt.ArrayLike</td>
<td>Initial linear velocity, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>w0</td>
<td>npt.ArrayLike</td>
<td>Initial angular velocity, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>a0</td>
<td>npt.ArrayLike</td>
<td>Initial linear acceleration, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>dw0</td>
<td>npt.ArrayLike</td>
<td>Initial angular acceleration, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>pf</td>
<td>npt.ArrayLike</td>
<td>Final position, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>qf</td>
<td>npt.ArrayLike</td>
<td>Final XYZW quaternion, shape (4,)</td>
<td>None</td>
</tr>
<tr>
<td>vf</td>
<td>npt.ArrayLike</td>
<td>Final linear velocity, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>wf</td>
<td>npt.ArrayLike</td>
<td>Final angular velocity, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>af</td>
<td>npt.ArrayLike</td>
<td>Final linear acceleration, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>dwf</td>
<td>npt.ArrayLike</td>
<td>Final angular acceleration, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>duration</td>
<td>float</td>
<td>Trajectory duration (seconds)</td>
<td>None</td>
</tr>
<tr>
<td>dt</td>
<td>float</td>
<td>Sampling period (seconds)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trajectory</td>
<td>The optimal local trajectory plan</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">local_planner</span><span class="p">(</span>

<span class="w">    </span><span class="n">p0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">q0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">v0</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">w0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">a0</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">dw0</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">pf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">qf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">vf</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">wf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">af</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">],</span>

<span class="w">    </span><span class="n">dwf</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">duration</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">float</span><span class="p">,</span>

<span class="w">    </span><span class="n">dt</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">float</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an optimal Bezier-curve-based position trajectory with a polynomial orientation component</span>

<span class="sd">    Note that this planner prioritizes solve time over constraint enforcement. This will plan with boundary conditions</span>

<span class="sd">    in mind, but other than that, it does not enforce things like speed/acceleration limits or collision avoidance. This</span>

<span class="sd">    allows us to use this in very fast online applications.</span>

<span class="sd">    In general, this should be paired with the global planner, so that we can precompute a reference trajectory which</span>

<span class="sd">    does enforce all constraints (and takes a bit longer to solve), and use this local planner to evaluate different</span>

<span class="sd">    rollouts between states along this reference trajectory</span>

<span class="sd">    Args:</span>

<span class="sd">        p0 (npt.ArrayLike): Initial position, shape (3,)</span>

<span class="sd">        q0 (npt.ArrayLike): Initial XYZW quaternion, shape (4,)</span>

<span class="sd">        v0 (npt.ArrayLike): Initial linear velocity, shape (3,)</span>

<span class="sd">        w0 (npt.ArrayLike): Initial angular velocity, shape (3,)</span>

<span class="sd">        a0 (npt.ArrayLike): Initial linear acceleration, shape (3,)</span>

<span class="sd">        dw0 (npt.ArrayLike): Initial angular acceleration, shape (3,)</span>

<span class="sd">        pf (npt.ArrayLike): Final position, shape (3,)</span>

<span class="sd">        qf (npt.ArrayLike): Final XYZW quaternion, shape (4,)</span>

<span class="sd">        vf (npt.ArrayLike): Final linear velocity, shape (3,)</span>

<span class="sd">        wf (npt.ArrayLike): Final angular velocity, shape (3,)</span>

<span class="sd">        af (npt.ArrayLike): Final linear acceleration, shape (3,)</span>

<span class="sd">        dwf (npt.ArrayLike): Final angular acceleration, shape (3,)</span>

<span class="sd">        duration (float): Trajectory duration (seconds)</span>

<span class="sd">        dt (float): Sampling period (seconds)</span>

<span class="sd">    Returns:</span>

<span class="sd">        Trajectory: The optimal local trajectory plan</span>

<span class="sd">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="c1"># Min-jerk position traj</span>

<span class="w">    </span><span class="c1"># Don&#39;t need a ton of control points because we&#39;re not enforcing constraints</span>

<span class="w">    </span><span class="n">n_control_pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span>

<span class="w">    </span><span class="n">curve</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bezier_trajectory</span><span class="p">(</span>

<span class="w">        </span><span class="n">p0</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">n_control_pts</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">vf</span><span class="p">,</span><span class="w"> </span><span class="n">a0</span><span class="p">,</span><span class="w"> </span><span class="n">af</span><span class="p">,</span><span class="w"> </span><span class="n">time_weight</span><span class="o">=</span><span class="mi">0</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">pos_traj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">traj_from_curve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">n_timesteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>

<span class="w">    </span><span class="n">quats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quaternion_interpolation_with_bcs</span><span class="p">(</span>

<span class="w">        </span><span class="n">q0</span><span class="p">,</span><span class="w"> </span><span class="n">qf</span><span class="p">,</span><span class="w"> </span><span class="n">w0</span><span class="p">,</span><span class="w"> </span><span class="n">wf</span><span class="p">,</span><span class="w"> </span><span class="n">dw0</span><span class="p">,</span><span class="w"> </span><span class="n">dwf</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">n_timesteps</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">omega</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quats_to_angular_velocities</span><span class="p">(</span><span class="n">quats</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">)</span>

<span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">gradient</span><span class="p">(</span><span class="n">omega</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p">,</span><span class="w"> </span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Trajectory</span><span class="p">(</span>

<span class="w">        </span><span class="n">positions</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">positions</span><span class="p">,</span>

<span class="w">        </span><span class="n">quats</span><span class="o">=</span><span class="n">quats</span><span class="p">,</span>

<span class="w">        </span><span class="n">lin_vels</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">linear_velocities</span><span class="p">,</span>

<span class="w">        </span><span class="n">ang_vels</span><span class="o">=</span><span class="n">omega</span><span class="p">,</span>

<span class="w">        </span><span class="n">lin_accels</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">linear_accels</span><span class="p">,</span>

<span class="w">        </span><span class="n">ang_accels</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span>

<span class="w">        </span><span class="n">times</span><span class="o">=</span><span class="n">pos_traj</span><span class="o">.</span><span class="n">times</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>
</code></pre></div>

</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        
<footer class="md-footer">
    
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../multi_robot_trajs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Multi Robot Trajs" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
                Multi Robot Trajs
              </div>
            </div>
          </a>
        
        
          
          <a href="../polynomials/" class="md-footer__link md-footer__link--next" aria-label="Next: Polynomials" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
                Polynomials
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
            
            Powered by
            <a href="http://timothycrosley.github.io/portray">portray.</a>
            You too can
            <a href="http://timothycrosley.github.io/portray">
              portray</a>
            your Python project well using automatic documentation.
          </div>
        
      </div>
    </div>
  </footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>