
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.4">
    
    
      
        <title>Bullet Utils - pyastrobee</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.80dcb947.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="pink">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-pyastrobeeutilsbullet_utils" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="pyastrobee" class="md-header__button md-logo" aria-label="pyastrobee" data-md-component="logo">
      
  <img src="../../../../images/favicon_large.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyastrobee
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bullet Utils
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/danielpmorton/pyastrobee" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pyastrobee
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="pyastrobee" class="md-nav__button md-logo" aria-label="pyastrobee" data-md-component="logo">
      
  <img src="../../../../images/favicon_large.png" alt="logo">

    </a>
    pyastrobee
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/danielpmorton/pyastrobee" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pyastrobee
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/additional_installs/" class="md-nav__link">
        Additional Installs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/bag_dynamics/" class="md-nav__link">
        Bag Dynamics
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/loading_iss_meshes/" class="md-nav__link">
        Loading Iss Meshes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/meshing/" class="md-nav__link">
        Meshing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/nasa_sim/" class="md-nav__link">
        Nasa Sim
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/pybullet_tips/" class="md-nav__link">
        Pybullet Tips
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/references/" class="md-nav__link">
        References
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/retexturing/" class="md-nav__link">
        Retexturing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/tet_meshing/" class="md-nav__link">
        Tet Meshing
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1" type="checkbox" id="__nav_13_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1">
          Pyastrobee
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pyastrobee" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_1">
          <span class="md-nav__icon md-icon"></span>
          Pyastrobee
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_2" type="checkbox" id="__nav_13_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_2">
          Config
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Config" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_2">
          <span class="md-nav__icon md-icon"></span>
          Config
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/astrobee_geom/" class="md-nav__link">
        Astrobee Geom
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/astrobee_motion/" class="md-nav__link">
        Astrobee Motion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/astrobee_transforms/" class="md-nav__link">
        Astrobee Transforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/bag_properties/" class="md-nav__link">
        Bag Properties
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/iss_paths/" class="md-nav__link">
        Iss Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/iss_safe_boxes/" class="md-nav__link">
        Iss Safe Boxes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_3" type="checkbox" id="__nav_13_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_3">
          Control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Control" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_3">
          <span class="md-nav__icon md-icon"></span>
          Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/constraint_controller/" class="md-nav__link">
        Constraint Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/force_torque_control/" class="md-nav__link">
        Force Torque Control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/keyboard_controller/" class="md-nav__link">
        Keyboard Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/metrics/" class="md-nav__link">
        Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/multi_robot/" class="md-nav__link">
        Multi Robot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/sampling_mpc/" class="md-nav__link">
        Sampling Mpc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../control/sampling_mpc_multithreaded/" class="md-nav__link">
        Sampling Mpc Multithreaded
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_4" type="checkbox" id="__nav_13_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_4">
          Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_4">
          <span class="md-nav__icon md-icon"></span>
          Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/abstract_bag/" class="md-nav__link">
        Abstract Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/astrobee/" class="md-nav__link">
        Astrobee
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/composite_bag/" class="md-nav__link">
        Composite Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/constraint_bag/" class="md-nav__link">
        Constraint Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/deformable_bag/" class="md-nav__link">
        Deformable Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/environments/" class="md-nav__link">
        Environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/hybrid_bag/" class="md-nav__link">
        Hybrid Bag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/iss/" class="md-nav__link">
        Iss
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../core/rigid_bag/" class="md-nav__link">
        Rigid Bag
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_5" type="checkbox" id="__nav_13_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_5">
          Trajectories
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Trajectories" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_5">
          <span class="md-nav__icon md-icon"></span>
          Trajectories
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/arm_planner/" class="md-nav__link">
        Arm Planner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/bezier/" class="md-nav__link">
        Bezier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/bezier_slerp/" class="md-nav__link">
        Bezier Slerp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/box_paths/" class="md-nav__link">
        Box Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/curve_utils/" class="md-nav__link">
        Curve Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/decasteljau_slerp/" class="md-nav__link">
        Decasteljau Slerp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/face_forward/" class="md-nav__link">
        Face Forward
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/multi_robot_trajs/" class="md-nav__link">
        Multi Robot Trajs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/planner/" class="md-nav__link">
        Planner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/polynomials/" class="md-nav__link">
        Polynomials
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/quaternion_interpolation/" class="md-nav__link">
        Quaternion Interpolation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/simple_trajectories/" class="md-nav__link">
        Simple Trajectories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/splines/" class="md-nav__link">
        Splines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/timing/" class="md-nav__link">
        Timing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/trajectory/" class="md-nav__link">
        Trajectory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectories/variable_time_curves/" class="md-nav__link">
        Variable Time Curves
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1_6" type="checkbox" id="__nav_13_1_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1_6">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utils" data-md-level="3">
        <label class="md-nav__title" for="__nav_13_1_6">
          <span class="md-nav__icon md-icon"></span>
          Utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../algos/" class="md-nav__link">
        Algos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bag_frame/" class="md-nav__link">
        Bag Frame
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../boxes/" class="md-nav__link">
        Boxes
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Bullet Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Bullet Utils
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_texture_to_deformable" class="md-nav__link">
    add_texture_to_deformable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_texture_to_rigid" class="md-nav__link">
    add_texture_to_rigid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure_visualization" class="md-nav__link">
    configure_visualization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_anchor" class="md-nav__link">
    create_anchor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_box" class="md-nav__link">
    create_box
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_sphere" class="md-nav__link">
    create_sphere
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize_pybullet" class="md-nav__link">
    initialize_pybullet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load_deformable_object" class="md-nav__link">
    load_deformable_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load_floor" class="md-nav__link">
    load_floor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load_rigid_object" class="md-nav__link">
    load_rigid_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playback_from_log" class="md-nav__link">
    playback_from_log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read_log_file" class="md-nav__link">
    read_log_file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run_sim" class="md-nav__link">
    run_sim
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debug_visualizer/" class="md-nav__link">
        Debug Visualizer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dynamics/" class="md-nav__link">
        Dynamics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../errors/" class="md-nav__link">
        Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../math_utils/" class="md-nav__link">
        Math Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh_utils/" class="md-nav__link">
        Mesh Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../poses/" class="md-nav__link">
        Poses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_utils/" class="md-nav__link">
        Python Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quaternion_derivatives/" class="md-nav__link">
        Quaternion Derivatives
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quaternions/" class="md-nav__link">
        Quaternions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rotations/" class="md-nav__link">
        Rotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../transformations/" class="md-nav__link">
        Transformations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../video_concatenation/" class="md-nav__link">
        Video Concatenation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_texture_to_deformable" class="md-nav__link">
    add_texture_to_deformable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_texture_to_rigid" class="md-nav__link">
    add_texture_to_rigid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure_visualization" class="md-nav__link">
    configure_visualization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_anchor" class="md-nav__link">
    create_anchor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_box" class="md-nav__link">
    create_box
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_sphere" class="md-nav__link">
    create_sphere
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize_pybullet" class="md-nav__link">
    initialize_pybullet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load_deformable_object" class="md-nav__link">
    load_deformable_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load_floor" class="md-nav__link">
    load_floor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load_rigid_object" class="md-nav__link">
    load_rigid_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playback_from_log" class="md-nav__link">
    playback_from_log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read_log_file" class="md-nav__link">
    read_log_file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run_sim" class="md-nav__link">
    run_sim
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/danielpmorton/pyastrobee/edit/main/reference/pyastrobee/utils/bullet_utils.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="module-pyastrobeeutilsbullet_utils">Module pyastrobee.utils.bullet_utils</h1>
<p>Pybullet-specific helper functions</p>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="sd">&quot;&quot;&quot;Pybullet-specific helper functions&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">Optional</span><span class="p">,</span><span class="w"> </span><span class="n">Union</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy.typing</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">npt</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pybullet</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pybullet_data</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pybullet_utils.bullet_client</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">BulletClient</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.utils.mesh_utils</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">get_mesh_data</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyastrobee.utils.python_utils</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">print_red</span>

<span class="k">def</span><span class="w"> </span><span class="nf">load_rigid_object</span><span class="p">(</span>

<span class="w">    </span><span class="n">filename</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span>

<span class="w">    </span><span class="n">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">scale</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>

<span class="w">    </span><span class="n">orn</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span>

<span class="w">    </span><span class="n">mass</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">fixed</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">False</span><span class="p">,</span>

<span class="w">    </span><span class="n">rgba</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">int</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Loads a rigid object from an OBJ or URDF file</span>

<span class="s2">    Args:</span>

<span class="s2">        filename (str): Path to the OBJ/URDF file to load</span>

<span class="s2">        texture_filename (str, optional): Path to a texture file to apply. Defaults to None, in which case no</span>

<span class="s2">            texture will be applied</span>

<span class="s2">        scale (float, optional): Scaling factor for the loaded object. Defaults to 1.0.</span>

<span class="s2">        pos (npt.ArrayLike, optional): Initial position for the loaded object. Defaults to (0, 0, 0).</span>

<span class="s2">        orn (npt.ArrayLike, optional): Initial XYZW quaternion orientation. Defaults to (0, 0, 0, 1).</span>

<span class="s2">        mass (float, optional): Mass of the loaded object. Defaults to 1.0.</span>

<span class="s2">        fixed (bool, optional): Whether or not to fix the object in space. Defaults to False.</span>

<span class="s2">        rgba (npt.ArrayLike, optional): Color of the object, expressed as RGBA, each within range [0, 1].</span>

<span class="s2">            Defaults to (1.0, 1.0, 1.0, 1.0) (white).</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Raises:</span>

<span class="s2">        ValueError: If the filename is not a valid OBJ or URDF</span>

<span class="s2">    Returns:</span>

<span class="s2">        int: ID number for the object</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="c1"># Deal with pybullet&#39;s weird handling of mass = 0 being fixed</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">mass</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span><span class="s2">&quot;Mass should not be a negative value&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">mass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span>

<span class="w">        </span><span class="n">print_red</span><span class="p">(</span>

<span class="w">            </span><span class="sa">f</span><span class="s2">&quot;Warning: the mass of </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> is 0, which will make it fixed. Use the &#39;fixed&#39; parameter instead&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">fixed</span><span class="p">:</span>

<span class="w">        </span><span class="n">mass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.obj&quot;</span><span class="p">):</span><span class="w">  </span><span class="c1"># mesh info</span>

<span class="w">        </span><span class="n">xyz_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">scale</span><span class="p">,</span><span class="w"> </span><span class="n">scale</span><span class="p">,</span><span class="w"> </span><span class="n">scale</span><span class="p">]</span>

<span class="w">        </span><span class="n">visual_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createVisualShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">shapeType</span><span class="o">=</span><span class="n">pybullet</span><span class="o">.</span><span class="n">GEOM_MESH</span><span class="p">,</span>

<span class="w">            </span><span class="n">rgbaColor</span><span class="o">=</span><span class="n">rgba</span><span class="p">,</span>

<span class="w">            </span><span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>

<span class="w">            </span><span class="n">meshScale</span><span class="o">=</span><span class="n">xyz_scale</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createCollisionShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">shapeType</span><span class="o">=</span><span class="n">pybullet</span><span class="o">.</span><span class="n">GEOM_MESH</span><span class="p">,</span><span class="w"> </span><span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">meshScale</span><span class="o">=</span><span class="n">xyz_scale</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">        </span><span class="n">rigid_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createMultiBody</span><span class="p">(</span>

<span class="w">            </span><span class="n">baseMass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span><span class="w">  </span><span class="c1"># mass==0 =&gt; fixed at position where it is loaded</span>

<span class="w">            </span><span class="n">basePosition</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>

<span class="w">            </span><span class="n">baseCollisionShapeIndex</span><span class="o">=</span><span class="n">collision_id</span><span class="p">,</span>

<span class="w">            </span><span class="n">baseVisualShapeIndex</span><span class="o">=</span><span class="n">visual_id</span><span class="p">,</span>

<span class="w">            </span><span class="n">baseOrientation</span><span class="o">=</span><span class="n">orn</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">elif</span><span class="w"> </span><span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.urdf&quot;</span><span class="p">):</span><span class="w">  </span><span class="c1"># URDF file</span>

<span class="w">        </span><span class="n">rigid_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">loadURDF</span><span class="p">(</span>

<span class="w">            </span><span class="n">filename</span><span class="p">,</span>

<span class="w">            </span><span class="n">pos</span><span class="p">,</span>

<span class="w">            </span><span class="n">orn</span><span class="p">,</span>

<span class="w">            </span><span class="n">useFixedBase</span><span class="o">=</span><span class="n">fixed</span><span class="p">,</span>

<span class="w">            </span><span class="n">globalScaling</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="p">:</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span>

<span class="w">            </span><span class="sa">f</span><span class="s2">&quot;Invalid filename: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">. Import either an OBJ or URDF file&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># TODO: decide if these parameters should be included as inputs rather than hard-coded</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">changeDynamics</span><span class="p">(</span>

<span class="w">        </span><span class="n">rigid_id</span><span class="p">,</span>

<span class="w">        </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>

<span class="w">        </span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">lateralFriction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">        </span><span class="n">spinningFriction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">        </span><span class="n">rollingFriction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">        </span><span class="n">restitution</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">texture_filename</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">        </span><span class="n">add_texture_to_rigid</span><span class="p">(</span><span class="n">rigid_id</span><span class="p">,</span><span class="w"> </span><span class="n">texture_filename</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">rigid_id</span>

<span class="k">def</span><span class="w"> </span><span class="nf">add_texture_to_rigid</span><span class="p">(</span>

<span class="w">    </span><span class="n">object_id</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span>

<span class="w">    </span><span class="n">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Applies a texture to a rigid object</span>

<span class="s2">    Args:</span>

<span class="s2">        object_id (int): The ID of the rigid object in the pybullet simulation</span>

<span class="s2">        texture_filename (str): Path to the texture file</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">texture_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="n">texture_filename</span><span class="p">)</span>

<span class="w">    </span><span class="n">kwargs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">pybullet</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;VISUAL_SHAPE_DOUBLE_SIDED&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;flags&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="o">.</span><span class="n">VISUAL_SHAPE_DOUBLE_SIDED</span>

<span class="w">    </span><span class="n">num_joints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">getNumJoints</span><span class="p">(</span><span class="n">object_id</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># TODO: check on the indexing here (for now, assuming dedo is correct)</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">num_joints</span><span class="p">):</span>

<span class="w">        </span><span class="n">client</span><span class="o">.</span><span class="n">changeVisualShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">object_id</span><span class="p">,</span>

<span class="w">            </span><span class="n">i</span><span class="p">,</span>

<span class="w">            </span><span class="n">rgbaColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>

<span class="w">            </span><span class="n">textureUniqueId</span><span class="o">=</span><span class="n">texture_id</span><span class="p">,</span>

<span class="w">            </span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">add_texture_to_deformable</span><span class="p">(</span>

<span class="w">    </span><span class="n">object_id</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span>

<span class="w">    </span><span class="n">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Applies a texture to a deformable object</span>

<span class="s2">    Args:</span>

<span class="s2">        object_id (int): The ID of the deformable object in the pybullet simulation</span>

<span class="s2">        texture_filename (str): Path to the texture file</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">texture_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="n">texture_filename</span><span class="p">)</span>

<span class="w">    </span><span class="n">kwargs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">pybullet</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;VISUAL_SHAPE_DOUBLE_SIDED&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;flags&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="o">.</span><span class="n">VISUAL_SHAPE_DOUBLE_SIDED</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">changeVisualShape</span><span class="p">(</span>

<span class="w">        </span><span class="n">object_id</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">rgbaColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">textureUniqueId</span><span class="o">=</span><span class="n">texture_id</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span>

<span class="w">    </span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">load_deformable_object</span><span class="p">(</span>

<span class="w">    </span><span class="n">filename</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span>

<span class="w">    </span><span class="n">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">scale</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>

<span class="w">    </span><span class="n">orn</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span>

<span class="w">    </span><span class="n">mass</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">bending_stiffness</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">damping_stiffness</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>

<span class="w">    </span><span class="n">elastic_stiffness</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">friction_coeff</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>

<span class="w">    </span><span class="n">self_collision</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">False</span><span class="p">,</span>

<span class="w">    </span><span class="n">sim_file_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">int</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Loads a deformable object from an OBJ file</span>

<span class="s2">    Notes: bending and elastic stiffness &gt;90 cause instabilities.</span>

<span class="s2">    Args:</span>

<span class="s2">        filename (str): Path to the deformable object to load</span>

<span class="s2">        texture_filename (str, optional): Path to a texture file to apply. Defaults to None, in which case no</span>

<span class="s2">            texture will be applied</span>

<span class="s2">        scale (float, optional): Scaling factor for the loaded object. Defaults to 1.0.</span>

<span class="s2">        pos (npt.ArrayLike, optional): Initial position for the loaded object. Defaults to (0.0, 0.0, 0.0).</span>

<span class="s2">        orn (npt.ArrayLike, optional): Initial XYZW quaternion orientation. Defaults to (0, 0, 0, 1).</span>

<span class="s2">        mass (float, optional): Mass of the loaded object. Defaults to 1.0 (Keeping at 1.0 is the most stable option).</span>

<span class="s2">        bending_stiffness (float, optional): Bending stiffness of the loaded object. Defaults to 1.0.</span>

<span class="s2">        damping_stiffness (float, optional): Damping stiffness of the loaded object. Defaults to 0.1.</span>

<span class="s2">        elastic_stiffness (float, optional): Elastic stiffness of the loaded object. Defaults to 1.0.</span>

<span class="s2">        friction_coeff (float, optional): Friction coefficient of the loaded object. Defaults to 0.1.</span>

<span class="s2">        self_collision (bool, optional): Whether or not to allow self-collisions for the object. Defaults to False.</span>

<span class="s2">            Note: setting this as True seemed to lead to mesh collapse</span>

<span class="s2">        sim_file_name (str, optional): This is an undocumented input to loadSoftBody, but it appears to allow you</span>

<span class="s2">            to load an OBJ in the filename (for texture purposes) and a corresponding VTK in the simFileName for</span>

<span class="s2">            volumetric softbody physics</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Returns:</span>

<span class="s2">        int: ID number for the object</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">mass</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.0</span><span class="p">:</span>

<span class="w">        </span><span class="n">print_red</span><span class="p">(</span>

<span class="w">            </span><span class="s2">&quot;Warning: mass &gt; 1 is the most stable for deformables. Small mass can cause instabilities&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># TODO: decide if some of these parameters should be included as inputs rather than hard-coded</span>

<span class="w">    </span><span class="n">deform_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">loadSoftBody</span><span class="p">(</span>

<span class="w">        </span><span class="n">mass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>

<span class="w">        </span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>

<span class="w">        </span><span class="n">basePosition</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">pos</span><span class="p">),</span>

<span class="w">        </span><span class="n">baseOrientation</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">orn</span><span class="p">),</span>

<span class="w">        </span><span class="n">springElasticStiffness</span><span class="o">=</span><span class="n">elastic_stiffness</span><span class="p">,</span>

<span class="w">        </span><span class="n">springDampingStiffness</span><span class="o">=</span><span class="n">damping_stiffness</span><span class="p">,</span>

<span class="w">        </span><span class="n">springBendingStiffness</span><span class="o">=</span><span class="n">bending_stiffness</span><span class="p">,</span>

<span class="w">        </span><span class="n">frictionCoeff</span><span class="o">=</span><span class="n">friction_coeff</span><span class="p">,</span>

<span class="w">        </span><span class="c1"># collisionMargin=0.003,  # how far apart do two objects begin interacting</span>

<span class="w">        </span><span class="n">useSelfCollision</span><span class="o">=</span><span class="n">self_collision</span><span class="p">,</span>

<span class="w">        </span><span class="n">springDampingAllDirections</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>

<span class="w">        </span><span class="n">useFaceContact</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>

<span class="w">        </span><span class="n">useNeoHookean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>

<span class="w">        </span><span class="n">useMassSpring</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>

<span class="w">        </span><span class="n">useBendingSprings</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>

<span class="w">        </span><span class="c1"># repulsionStiffness=10000000,</span>

<span class="w">        </span><span class="n">simFileName</span><span class="o">=</span><span class="n">sim_file_name</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># TODO figure out what this sparseSdfVoxelSize parameter actually does (it&#39;s not documented)</span>

<span class="w">    </span><span class="c1"># See pybullet examples/deformable_anchor.py for its usage there</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setPhysicsEngineParameter</span><span class="p">(</span><span class="n">sparseSdfVoxelSize</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">texture_filename</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">        </span><span class="n">add_texture_to_deformable</span><span class="p">(</span><span class="n">deform_id</span><span class="p">,</span><span class="w"> </span><span class="n">texture_filename</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Validate the size of the mesh to assure stability</span>

<span class="w">    </span><span class="n">num_mesh_vertices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_mesh_data</span><span class="p">(</span><span class="n">deform_id</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">num_mesh_vertices</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="mi">13</span><span class="p">:</span>

<span class="w">        </span><span class="n">print_red</span><span class="p">(</span>

<span class="w">            </span><span class="sa">f</span><span class="s2">&quot;Warning: high number of mesh vertices: </span><span class="si">{</span><span class="n">num_mesh_vertices</span><span class="si">}</span><span class="s2">. Consider a lower-res mesh&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">deform_id</span>

<span class="k">def</span><span class="w"> </span><span class="nf">initialize_pybullet</span><span class="p">(</span>

<span class="w">    </span><span class="n">use_gui</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">True</span><span class="p">,</span>

<span class="w">    </span><span class="n">physics_freq</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">350</span><span class="p">,</span>

<span class="w">    </span><span class="n">gravity</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">bg_color</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pybullet</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Starts a pybullet client with the required physics parameters we care about</span>

<span class="s2">    NOTE: the client object returned from this function should ALWAYS be assigned to a variable</span>

<span class="s2">    to keep the simulation in scope. i.e. don&#39;t just call initialize_pybullet(), use client = initialize_pybullet()</span>

<span class="s2">    even if you&#39;re not worrying about multiple physics simulations</span>

<span class="s2">    Args:</span>

<span class="s2">        use_gui (bool, optional): Whether or not to use the GUI as opposed to headless. Defaults to True</span>

<span class="s2">        physics_freq (float, optional): Physics simulation frequency, in Hz. Defaults to 350.</span>

<span class="s2">            Note: Pybullet defaults to 240 Hz, but this seemed to be unstable for soft bodies</span>

<span class="s2">        gravity (float, optional): Z component of gravitational acceleration vector. Defaults to 0.</span>

<span class="s2">        bg_color (npt.ArrayLike, optional): RGB values for the GUI background, each in range [0, 1].</span>

<span class="s2">            Defaults to (0.0, 0.0, 0.0) (black). Note: (1.0, 1.0, 1.0) is white</span>

<span class="s2">    Returns:</span>

<span class="s2">        BulletClient: Pybullet physics simulation client</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="c1"># Make sure we&#39;re in the right directory so filepaths work well with pybullet</span>

<span class="w">    </span><span class="n">cwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">cwd</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;pyastrobee&quot;</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">cwd</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;pyastrobee/pyastrobee&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ConnectionRefusedError</span><span class="p">(</span>

<span class="w">            </span><span class="sa">f</span><span class="s2">&quot;You are running scripts from </span><span class="si">{</span><span class="n">cwd</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">Ensure you&#39;re at the top-level pyastrobee directory.&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Ensure that the background color values are within the proper range</span>

<span class="w">    </span><span class="n">bg_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bg_color</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">bg_color</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">bg_color</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nb">all</span><span class="p">(</span><span class="n">bg_color</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">)):</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid background color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">bg_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>

<span class="w">        </span><span class="sa">f</span><span class="s2">&quot;--background_color_red=</span><span class="si">{</span><span class="n">bg_color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>

<span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;--background_color_green=</span><span class="si">{</span><span class="n">bg_color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>

<span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;--background_color_blue=</span><span class="si">{</span><span class="n">bg_color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Connect to pybullet</span>

<span class="w">    </span><span class="n">connection_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="o">.</span><span class="n">GUI</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">use_gui</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">pybullet</span><span class="o">.</span><span class="n">DIRECT</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BulletClient</span><span class="p">(</span><span class="n">connection_mode</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="o">=</span><span class="n">bg_args</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Configure physics</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">resetSimulation</span><span class="p">(</span><span class="n">pybullet</span><span class="o">.</span><span class="n">RESET_USE_DEFORMABLE_WORLD</span><span class="p">)</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setTimeStep</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">physics_freq</span><span class="p">)</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setGravity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">gravity</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Configure search paths</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setAdditionalSearchPath</span><span class="p">(</span><span class="n">pybullet_data</span><span class="o">.</span><span class="n">getDataPath</span><span class="p">())</span>

<span class="w">    </span><span class="c1"># client.setAdditionalSearchPath(os.path.join(os.getcwd(), &quot;pyastrobee/assets&quot;))</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setAdditionalSearchPath</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Remove the extra windows in PyBullet GUI (until we use them for cameras).</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="n">pybullet</span><span class="o">.</span><span class="n">COV_ENABLE_GUI</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">client</span>

<span class="k">def</span><span class="w"> </span><span class="nf">configure_visualization</span><span class="p">(</span>

<span class="w">    </span><span class="n">camera_params</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">flags_to_enable</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">flags_to_disable</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Configures the pybullet debug visualizer</span>

<span class="s2">    Args:</span>

<span class="s2">        camera_params (list[float], optional): Used to reset camera position. [dist, pitch, yaw, pos_x, pos_y, pos_z]</span>

<span class="s2">            where dist is the distance from eye to camera target, yaw is left/right angle, pitch is up/down angle, and</span>

<span class="s2">            the xyz positions are for the focus point. Defaults to None.</span>

<span class="s2">        flags_to_enable (list[float], optional): A list of pybullet flags (for example, COV_ENABLE_WIREFRAME).</span>

<span class="s2">            Defaults to None.</span>

<span class="s2">        flags_to_disable (list[float], optional): A list of pybullet flags (for example, COV_ENABLE_WIREFRAME).</span>

<span class="s2">            Defaults to None.</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">        **kwargs: Any additional kwargs to set. See the pybullet configureDebugVisualizer documentation for more info</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">camera_params</span><span class="p">:</span>

<span class="w">        </span><span class="n">dist</span><span class="p">,</span><span class="w"> </span><span class="n">pitch</span><span class="p">,</span><span class="w"> </span><span class="n">yaw</span><span class="p">,</span><span class="w"> </span><span class="n">pos_x</span><span class="p">,</span><span class="w"> </span><span class="n">pos_y</span><span class="p">,</span><span class="w"> </span><span class="n">pos_z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera_params</span>

<span class="w">        </span><span class="n">client</span><span class="o">.</span><span class="n">resetDebugVisualizerCamera</span><span class="p">(</span>

<span class="w">            </span><span class="n">cameraDistance</span><span class="o">=</span><span class="n">dist</span><span class="p">,</span>

<span class="w">            </span><span class="n">cameraPitch</span><span class="o">=</span><span class="n">pitch</span><span class="p">,</span>

<span class="w">            </span><span class="n">cameraYaw</span><span class="o">=</span><span class="n">yaw</span><span class="p">,</span>

<span class="w">            </span><span class="n">cameraTargetPosition</span><span class="o">=</span><span class="p">[</span><span class="n">pos_x</span><span class="p">,</span><span class="w"> </span><span class="n">pos_y</span><span class="p">,</span><span class="w"> </span><span class="n">pos_z</span><span class="p">],</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">flags_to_enable</span><span class="p">:</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">flags_to_enable</span><span class="p">:</span>

<span class="w">            </span><span class="n">client</span><span class="o">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="kc">True</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">flags_to_disable</span><span class="p">:</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">flags_to_disable</span><span class="p">:</span>

<span class="w">            </span><span class="n">client</span><span class="o">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">kwargs</span><span class="p">:</span>

<span class="w">        </span><span class="n">client</span><span class="o">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">load_floor</span><span class="p">(</span>

<span class="w">    </span><span class="n">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">z_pos</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">int</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Loads a floor into the pybullet simulation</span>

<span class="s2">    Args:</span>

<span class="s2">        texture_filename (str, optional): If adding a texture to the floor plane, pass in the filename.</span>

<span class="s2">            Defaults to None.</span>

<span class="s2">        z_pos (float, optional): Height (z-coordinate) of the floor in the world. Defaults to 0.0</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Returns:</span>

<span class="s2">        int: Pybullet ID corresponding to the floor</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setAdditionalSearchPath</span><span class="p">(</span><span class="n">pybullet_data</span><span class="o">.</span><span class="n">getDataPath</span><span class="p">())</span>

<span class="w">    </span><span class="n">floor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">loadURDF</span><span class="p">(</span><span class="s2">&quot;plane.urdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">basePosition</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">z_pos</span><span class="p">])</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">texture_filename</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">        </span><span class="n">texture_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="n">texture_filename</span><span class="p">)</span>

<span class="w">        </span><span class="n">client</span><span class="o">.</span><span class="n">changeVisualShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">floor_id</span><span class="p">,</span>

<span class="w">            </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>

<span class="w">            </span><span class="n">rgbaColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>

<span class="w">            </span><span class="n">textureUniqueId</span><span class="o">=</span><span class="n">texture_id</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">floor_id</span>

<span class="k">def</span><span class="w"> </span><span class="nf">run_sim</span><span class="p">(</span>

<span class="w">    </span><span class="n">viz_freq</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span>

<span class="w">    </span><span class="n">timeout</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">):</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Runs the pybullet simulation</span>

<span class="s2">    Args:</span>

<span class="s2">        viz_freq (float, optional): Frequency (Hz) to run the visualization (if connected via GUI). Defaults to 240.</span>

<span class="s2">        timeout (float, optional): Amount of time to run the simulation. Defaults to None, in which case the simulation</span>

<span class="s2">            will remain open until it is killed manually.</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Raises:</span>

<span class="s2">        ConnectionError: If a pybullet client is not currently running</span>

<span class="s2">        ValueError: If the visualization frequency is greater than the physics frequency</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">connect_info</span><span class="p">:</span><span class="w"> </span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="nb">int</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">getConnectionInfo</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">connect_info</span><span class="p">[</span><span class="s2">&quot;isConnected&quot;</span><span class="p">]:</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ConnectionError</span><span class="p">(</span><span class="s2">&quot;Connect to a pybullet client before running the sim&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">connect_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;GUI&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">connect_info</span><span class="p">[</span><span class="s2">&quot;connectionMethod&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;DIRECT&quot;</span>

<span class="w">    </span><span class="n">phys_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">getPhysicsEngineParameters</span><span class="p">()</span>

<span class="w">    </span><span class="n">phys_freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">phys_info</span><span class="p">[</span><span class="s2">&quot;fixedTimeStep&quot;</span><span class="p">]</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">viz_freq</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">phys_freq</span><span class="p">:</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span>

<span class="w">            </span><span class="sa">f</span><span class="s2">&quot;Cannot visualize (</span><span class="si">{</span><span class="n">viz_freq</span><span class="si">}</span><span class="s2"> Hz) faster than the physics (</span><span class="si">{</span><span class="n">phys_freq</span><span class="si">}</span><span class="s2"> Hz)&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">timeout</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">        </span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="w">    </span><span class="k">try</span><span class="p">:</span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">timeout</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>

<span class="w">            </span><span class="n">client</span><span class="o">.</span><span class="n">stepSimulation</span><span class="p">()</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">connect_mode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;GUI&quot;</span><span class="p">:</span>

<span class="w">                </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">viz_freq</span><span class="p">)</span>

<span class="w">    </span><span class="k">finally</span><span class="p">:</span>

<span class="w">        </span><span class="n">client</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_sphere</span><span class="p">(</span>

<span class="w">    </span><span class="n">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">mass</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span>

<span class="w">    </span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span>

<span class="w">    </span><span class="n">use_collision</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="p">,</span>

<span class="w">    </span><span class="n">rgba</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">int</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Creates a rigid sphere in the Pybullet simulation</span>

<span class="s2">    Args:</span>

<span class="s2">        pos (npt.ArrayLike): Position of the sphere in world frame, shape (3)</span>

<span class="s2">        mass (float): Mass of the sphere. If set to 0, the sphere is fixed in space</span>

<span class="s2">        radius (float): Radius of the sphere</span>

<span class="s2">        use_collision (bool): Whether or not collision is enabled for the sphere</span>

<span class="s2">        rgba (npt.ArrayLike, optional): Color of the sphere, with each RGBA value being in [0, 1].</span>

<span class="s2">            Defaults to (1, 1, 1, 1) (white)</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Returns:</span>

<span class="s2">        int: ID of the sphere in Pybullet</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">visual_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createVisualShape</span><span class="p">(</span>

<span class="w">        </span><span class="n">pybullet</span><span class="o">.</span><span class="n">GEOM_SPHERE</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">rgbaColor</span><span class="o">=</span><span class="n">rgba</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">use_collision</span><span class="p">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createCollisionShape</span><span class="p">(</span><span class="n">pybullet</span><span class="o">.</span><span class="n">GEOM_SPHERE</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="p">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="w">    </span><span class="n">sphere_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createMultiBody</span><span class="p">(</span>

<span class="w">        </span><span class="n">baseMass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">basePosition</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseCollisionShapeIndex</span><span class="o">=</span><span class="n">collision_id</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseVisualShapeIndex</span><span class="o">=</span><span class="n">visual_id</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">sphere_id</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_anchor</span><span class="p">(</span>

<span class="w">    </span><span class="n">soft_body_id</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span>

<span class="w">    </span><span class="n">vertex_id</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span>

<span class="w">    </span><span class="n">parent_id</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span>

<span class="w">    </span><span class="n">link_id</span><span class="p">:</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span>

<span class="w">    </span><span class="n">parent_frame_pos</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">add_geom</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">False</span><span class="p">,</span>

<span class="w">    </span><span class="n">geom_pos</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Creates an anchor between a softbody and another object (or the world)</span>

<span class="s2">    Args:</span>

<span class="s2">        soft_body_id (int): ID of the softbody in Pybullet</span>

<span class="s2">        vertex_id (int): Index of the mesh vertex on the softbody we are anchoring to</span>

<span class="s2">        parent_id (int): ID of the parent object in Pybullet. If anchoring to world, this will be -1</span>

<span class="s2">        link_id (int): Index of the link on the parent object. If the parent does not have links, use -1</span>

<span class="s2">        parent_frame_pos (Optional[list[float]]): If the anchor is being affixed to a specific point on the parent</span>

<span class="s2">            object, pass in the location here. Defaults to None.</span>

<span class="s2">        add_geom (bool, optional): Whether or not to add a small sphere to visualize the positioning on the anchor.</span>

<span class="s2">            Defaults to False.</span>

<span class="s2">        geom_pos (Optional[npt.ArrayLike]): Position of the sphere in world frame, shape (3,).</span>

<span class="s2">            Defaults to None, (in which case add_geom must also be None)</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Returns:</span>

<span class="s2">        tuple[int, Optional[int]]:</span>

<span class="s2">            int: The Pybullet ID for the anchor</span>

<span class="s2">            Optional[int]: The Pybullet ID for the geometry (if add_geom is False, this is None)</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">anchor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createSoftBodyAnchor</span><span class="p">(</span>

<span class="w">        </span><span class="n">soft_body_id</span><span class="p">,</span><span class="w"> </span><span class="n">vertex_id</span><span class="p">,</span><span class="w"> </span><span class="n">parent_id</span><span class="p">,</span><span class="w"> </span><span class="n">link_id</span><span class="p">,</span><span class="w"> </span><span class="n">parent_frame_pos</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">add_geom</span><span class="p">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">geom_pos</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">            </span><span class="k">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span>

<span class="w">                </span><span class="s2">&quot;If visualizing the anchor, the world-position of the anchor must be included&quot;</span>

<span class="w">            </span><span class="p">)</span>

<span class="w">        </span><span class="c1"># Create a collision-less sphere to visualize the anchor position</span>

<span class="w">        </span><span class="n">geom_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_sphere</span><span class="p">(</span><span class="n">geom_pos</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">],</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>

<span class="w">        </span><span class="c1"># Then create a secondary anchor to make sure this sphere stays in the right place</span>

<span class="w">        </span><span class="n">geom_anchor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createSoftBodyAnchor</span><span class="p">(</span>

<span class="w">            </span><span class="n">soft_body_id</span><span class="p">,</span><span class="w"> </span><span class="n">vertex_id</span><span class="p">,</span><span class="w"> </span><span class="n">geom_id</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="p">:</span>

<span class="w">        </span><span class="n">geom_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">anchor_id</span><span class="p">,</span><span class="w"> </span><span class="n">geom_id</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_box</span><span class="p">(</span>

<span class="w">    </span><span class="n">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">orn</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">mass</span><span class="p">:</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span>

<span class="w">    </span><span class="n">sidelengths</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="n">use_collision</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="p">,</span>

<span class="w">    </span><span class="n">rgba</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">int</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Creates a rigid box in the Pybullet simulation</span>

<span class="s2">    Args:</span>

<span class="s2">        pos (npt.ArrayLike): Position of the box in world frame, shape (3)</span>

<span class="s2">        orn (npt.ArrayLike): Orientation (XYZW quaternion) of the box in world frame, shape (4,)</span>

<span class="s2">        mass (float): Mass of the box. If set to 0, the box is fixed in space</span>

<span class="s2">        sidelengths (npt.ArrayLike): Sidelengths of the box along the local XYZ axes, shape (3,)</span>

<span class="s2">        use_collision (bool): Whether or not collision is enabled for the box</span>

<span class="s2">        rgba (npt.ArrayLike, optional): Color of the box, with each RGBA value being in [0, 1].</span>

<span class="s2">            Defaults to (1, 1, 1, 1) (white)</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    Returns:</span>

<span class="s2">        int: ID of the box in Pybullet</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">sidelengths</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span>

<span class="w">        </span><span class="k">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span><span class="s2">&quot;Must provide the dimensions of the three sides of the box&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">half_extents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">sidelengths</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="n">visual_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createVisualShape</span><span class="p">(</span>

<span class="w">        </span><span class="n">pybullet</span><span class="o">.</span><span class="n">GEOM_BOX</span><span class="p">,</span>

<span class="w">        </span><span class="n">halfExtents</span><span class="o">=</span><span class="n">half_extents</span><span class="p">,</span>

<span class="w">        </span><span class="n">rgbaColor</span><span class="o">=</span><span class="n">rgba</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">use_collision</span><span class="p">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createCollisionShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">pybullet</span><span class="o">.</span><span class="n">GEOM_BOX</span><span class="p">,</span>

<span class="w">            </span><span class="n">halfExtents</span><span class="o">=</span><span class="n">half_extents</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="p">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="w">    </span><span class="n">box_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">createMultiBody</span><span class="p">(</span>

<span class="w">        </span><span class="n">baseMass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">basePosition</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseOrientation</span><span class="o">=</span><span class="n">orn</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseCollisionShapeIndex</span><span class="o">=</span><span class="n">collision_id</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseVisualShapeIndex</span><span class="o">=</span><span class="n">visual_id</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">box_id</span>

<span class="k">def</span><span class="w"> </span><span class="nf">read_log_file</span><span class="p">(</span>

<span class="w">    </span><span class="n">filename</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">False</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="nb">float</span><span class="p">]]]:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Reads a Pybullet state log for generic robots and objects</span>

<span class="s2">    We assume that when generating the log:</span>

<span class="s2">    - The loggingType was set to STATE_LOGGING_GENERIC_ROBOT</span>

<span class="s2">    - No softbodies were included in the logged items</span>

<span class="s2">    - The maxLogDof is left at the default value (12)</span>

<span class="s2">    This code is modified from bullet3/examples/pybullet/examples/kuka_with_cube_playback.py</span>

<span class="s2">    Args:</span>

<span class="s2">        filename (str): Filename for the saved log</span>

<span class="s2">        verbose (bool, optional): Whether to print info about the log when reading. Defaults to False.</span>

<span class="s2">    Returns:</span>

<span class="s2">        list[list[Union[int, float]]]: The Pybullet log.</span>

<span class="s2">            Length is (number of timesteps) * (number of objects logged)</span>

<span class="s2">            If multiple objects are logged, there will be multiple consecutive log entries for the same timestep</span>

<span class="s2">            Each record in the log contains the following info:</span>

<span class="s2">                step_count = record[0]</span>

<span class="s2">                timestamp = record[1]</span>

<span class="s2">                unique_id = record[2]</span>

<span class="s2">                position = record[3:6]</span>

<span class="s2">                orientation = record[6:10]</span>

<span class="s2">                velocity = record[10:13]</span>

<span class="s2">                angular_velocity = record[13:16]</span>

<span class="s2">                num_joints = record[16]</span>

<span class="s2">                joint_positions = record[17 : 17 + max_log_dof]</span>

<span class="s2">                joint_torques = record[17 + max_log_dof :]</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="k">with</span><span class="w"> </span><span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">f</span><span class="p">:</span>

<span class="w">        </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">fmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="c1"># The byte number of one record</span>

<span class="w">        </span><span class="n">sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">struct</span><span class="o">.</span><span class="n">calcsize</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

<span class="w">        </span><span class="c1"># The type number of one record</span>

<span class="w">        </span><span class="n">ncols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

<span class="w">        </span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span>

<span class="w">            </span><span class="s2">&quot;keys&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span>

<span class="w">            </span><span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">fmt</span><span class="p">,</span>

<span class="w">            </span><span class="s2">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">sz</span><span class="p">,</span>

<span class="w">            </span><span class="s2">&quot;columns&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">ncols</span><span class="p">,</span>

<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">verbose</span><span class="p">:</span>

<span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>

<span class="w">        </span><span class="c1"># Read data</span>

<span class="w">        </span><span class="n">whole_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="w">    </span><span class="c1"># split by alignment word</span>

<span class="w">    </span><span class="n">chunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">whole_file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\xaa\xbb</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">chunks</span><span class="p">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">sz</span><span class="p">:</span>

<span class="w">            </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span><span class="w"> </span><span class="n">chunk</span><span class="p">)</span>

<span class="w">            </span><span class="n">record</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">range</span><span class="p">(</span><span class="n">ncols</span><span class="p">):</span>

<span class="w">                </span><span class="n">record</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="w">            </span><span class="n">log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">log</span>

<span class="c1"># TODO determine if this really is real time or if it&#39;s sim time during the original run...</span>

<span class="k">def</span><span class="w"> </span><span class="nf">playback_from_log</span><span class="p">(</span>

<span class="w">    </span><span class="n">log_file</span><span class="p">:</span><span class="w"> </span><span class="nb">str</span><span class="p">,</span>

<span class="w">    </span><span class="n">real_time</span><span class="p">:</span><span class="w"> </span><span class="nb">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">True</span><span class="p">,</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">BulletClient</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>

<span class="w">    </span><span class="s2">&quot;&quot;&quot;Reads a log file and then replays that logged simulation</span>

<span class="s2">    We assume that the environment has been set up the same way as the original environment</span>

<span class="s2">    when the logging occurred. If this is not the case, it can lead to odd results</span>

<span class="s2">    The logs also contain a lot more info like velocities and torques, but we don&#39;t really need</span>

<span class="s2">    this information to play things back (simply resetting pose will appear correct)</span>

<span class="s2">    This code is modified from bullet3/examples/pybullet/examples/kuka_with_cube_playback.py</span>

<span class="s2">    Args:</span>

<span class="s2">        log_file (str): Filename for the saved log</span>

<span class="s2">        real_time (bool, optional): Whether to play back the log in real time (according to the timestamps saved in</span>

<span class="s2">            the log). Defaults to True. If False, things will be very speedy</span>

<span class="s2">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="s2">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_log_file</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>

<span class="w">    </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">log</span><span class="p">:</span>

<span class="w">        </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="w">        </span><span class="n">uid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="w">        </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>

<span class="w">        </span><span class="n">orn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>

<span class="w">        </span><span class="n">client</span><span class="o">.</span><span class="n">resetBasePositionAndOrientation</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">orn</span><span class="p">)</span>

<span class="w">        </span><span class="n">num_joints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">getNumJoints</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">range</span><span class="p">(</span><span class="n">num_joints</span><span class="p">):</span>

<span class="w">            </span><span class="n">joint_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">getJointInfo</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>

<span class="w">            </span><span class="n">q_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">joint_info</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">q_index</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>

<span class="w">                </span><span class="n">client</span><span class="o">.</span><span class="n">resetJointState</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">record</span><span class="p">[</span><span class="n">q_index</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">17</span><span class="p">])</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">real_time</span><span class="p">:</span>

<span class="w">            </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">start_time</span><span class="p">))</span>
</code></pre></div>

</details>
<h2 id="functions">Functions</h2>
<h3 id="add_texture_to_deformable">add_texture_to_deformable</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">add_texture_to_deformable</span><span class="p">(</span>
    <span class="n">object_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">texture_filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

<p>Applies a texture to a deformable object</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>object_id</td>
<td>int</td>
<td>The ID of the deformable object in the pybullet simulation</td>
<td>None</td>
</tr>
<tr>
<td>texture_filename</td>
<td>str</td>
<td>Path to the texture file</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">add_texture_to_deformable</span><span class="p">(</span>

<span class="w">    </span><span class="nf">object_id</span><span class="err">:</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span>

<span class="w">    </span><span class="nl">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Applies a texture to a deformable object</span>

<span class="ss">    Args:</span>

<span class="ss">        object_id (int): The ID of the deformable object in the pybullet simulation</span>

<span class="ss">        texture_filename (str): Path to the texture file</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">texture_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="n">texture_filename</span><span class="p">)</span>

<span class="w">    </span><span class="n">kwargs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">hasattr</span><span class="p">(</span><span class="n">pybullet</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;VISUAL_SHAPE_DOUBLE_SIDED&quot;</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">kwargs</span><span class="o">[</span><span class="n">&quot;flags&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="p">.</span><span class="n">VISUAL_SHAPE_DOUBLE_SIDED</span>

<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">changeVisualShape</span><span class="p">(</span>

<span class="w">        </span><span class="nf">object_id</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">rgbaColor</span><span class="o">=[</span><span class="n">1, 1, 1, 1</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">textureUniqueId</span><span class="o">=</span><span class="n">texture_id</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span>

<span class="w">    </span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="add_texture_to_rigid">add_texture_to_rigid</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">add_texture_to_rigid</span><span class="p">(</span>
    <span class="n">object_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">texture_filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

<p>Applies a texture to a rigid object</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>object_id</td>
<td>int</td>
<td>The ID of the rigid object in the pybullet simulation</td>
<td>None</td>
</tr>
<tr>
<td>texture_filename</td>
<td>str</td>
<td>Path to the texture file</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">add_texture_to_rigid</span><span class="p">(</span>

<span class="w">    </span><span class="nf">object_id</span><span class="err">:</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span>

<span class="w">    </span><span class="nl">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Applies a texture to a rigid object</span>

<span class="ss">    Args:</span>

<span class="ss">        object_id (int): The ID of the rigid object in the pybullet simulation</span>

<span class="ss">        texture_filename (str): Path to the texture file</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">texture_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="n">texture_filename</span><span class="p">)</span>

<span class="w">    </span><span class="n">kwargs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">hasattr</span><span class="p">(</span><span class="n">pybullet</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;VISUAL_SHAPE_DOUBLE_SIDED&quot;</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">kwargs</span><span class="o">[</span><span class="n">&quot;flags&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="p">.</span><span class="n">VISUAL_SHAPE_DOUBLE_SIDED</span>

<span class="w">    </span><span class="n">num_joints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getNumJoints</span><span class="p">(</span><span class="nf">object_id</span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nl">TODO</span><span class="p">:</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">indexing</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">now</span><span class="p">,</span><span class="w"> </span><span class="n">assuming</span><span class="w"> </span><span class="n">dedo</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">correct</span><span class="p">)</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">num_joints</span><span class="p">)</span><span class="err">:</span>

<span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="n">changeVisualShape</span><span class="p">(</span>

<span class="w">            </span><span class="nf">object_id</span><span class="p">,</span>

<span class="w">            </span><span class="n">i</span><span class="p">,</span>

<span class="w">            </span><span class="n">rgbaColor</span><span class="o">=[</span><span class="n">1, 1, 1, 1</span><span class="o">]</span><span class="p">,</span>

<span class="w">            </span><span class="n">textureUniqueId</span><span class="o">=</span><span class="n">texture_id</span><span class="p">,</span>

<span class="w">            </span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="configure_visualization">configure_visualization</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">configure_visualization</span><span class="p">(</span>
    <span class="n">camera_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flags_to_enable</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flags_to_disable</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

<p>Configures the pybullet debug visualizer</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>camera_params</td>
<td>list[float]</td>
<td>Used to reset camera position. [dist, pitch, yaw, pos_x, pos_y, pos_z]<br>where dist is the distance from eye to camera target, yaw is left/right angle, pitch is up/down angle, and<br>the xyz positions are for the focus point. Defaults to None.</td>
<td>None</td>
</tr>
<tr>
<td>flags_to_enable</td>
<td>list[float]</td>
<td>A list of pybullet flags (for example, COV_ENABLE_WIREFRAME).<br>Defaults to None.</td>
<td>None</td>
</tr>
<tr>
<td>flags_to_disable</td>
<td>list[float]</td>
<td>A list of pybullet flags (for example, COV_ENABLE_WIREFRAME).<br>Defaults to None.</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
<tr>
<td>**kwargs</td>
<td>None</td>
<td>Any additional kwargs to set. See the pybullet configureDebugVisualizer documentation for more info</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">configure_visualization</span><span class="p">(</span>

<span class="w">    </span><span class="nl">camera_params</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">list[float</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">flags_to_enable</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">list[float</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">flags_to_disable</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">list[float</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Configures the pybullet debug visualizer</span>

<span class="ss">    Args:</span>

<span class="ss">        camera_params (list[float], optional): Used to reset camera position. [dist, pitch, yaw, pos_x, pos_y, pos_z]</span>

<span class="ss">            where dist is the distance from eye to camera target, yaw is left/right angle, pitch is up/down angle, and</span>

<span class="ss">            the xyz positions are for the focus point. Defaults to None.</span>

<span class="ss">        flags_to_enable (list[float], optional): A list of pybullet flags (for example, COV_ENABLE_WIREFRAME).</span>

<span class="ss">            Defaults to None.</span>

<span class="ss">        flags_to_disable (list[float], optional): A list of pybullet flags (for example, COV_ENABLE_WIREFRAME).</span>

<span class="ss">            Defaults to None.</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">        **kwargs: Any additional kwargs to set. See the pybullet configureDebugVisualizer documentation for more info</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">camera_params</span><span class="p">:</span>

<span class="w">        </span><span class="n">dist</span><span class="p">,</span><span class="w"> </span><span class="n">pitch</span><span class="p">,</span><span class="w"> </span><span class="n">yaw</span><span class="p">,</span><span class="w"> </span><span class="n">pos_x</span><span class="p">,</span><span class="w"> </span><span class="n">pos_y</span><span class="p">,</span><span class="w"> </span><span class="n">pos_z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera_params</span>

<span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="n">resetDebugVisualizerCamera</span><span class="p">(</span>

<span class="w">            </span><span class="n">cameraDistance</span><span class="o">=</span><span class="n">dist</span><span class="p">,</span>

<span class="w">            </span><span class="n">cameraPitch</span><span class="o">=</span><span class="n">pitch</span><span class="p">,</span>

<span class="w">            </span><span class="n">cameraYaw</span><span class="o">=</span><span class="n">yaw</span><span class="p">,</span>

<span class="w">            </span><span class="n">cameraTargetPosition</span><span class="o">=[</span><span class="n">pos_x, pos_y, pos_z</span><span class="o">]</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">flags_to_enable</span><span class="p">:</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">flags_to_enable</span><span class="p">:</span>

<span class="w">            </span><span class="n">client</span><span class="p">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="k">True</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">flags_to_disable</span><span class="p">:</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">flags_to_disable</span><span class="p">:</span>

<span class="w">            </span><span class="n">client</span><span class="p">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="k">False</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">kwargs</span><span class="p">:</span>

<span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>

</details>
<h3 id="create_anchor">create_anchor</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">create_anchor</span><span class="p">(</span>
    <span class="n">soft_body_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">vertex_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">parent_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">link_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">parent_frame_pos</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_geom</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">geom_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
</code></pre></div>

<p>Creates an anchor between a softbody and another object (or the world)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>soft_body_id</td>
<td>int</td>
<td>ID of the softbody in Pybullet</td>
<td>None</td>
</tr>
<tr>
<td>vertex_id</td>
<td>int</td>
<td>Index of the mesh vertex on the softbody we are anchoring to</td>
<td>None</td>
</tr>
<tr>
<td>parent_id</td>
<td>int</td>
<td>ID of the parent object in Pybullet. If anchoring to world, this will be -1</td>
<td>None</td>
</tr>
<tr>
<td>link_id</td>
<td>int</td>
<td>Index of the link on the parent object. If the parent does not have links, use -1</td>
<td>None</td>
</tr>
<tr>
<td>parent_frame_pos</td>
<td>Optional[list[float]]</td>
<td>If the anchor is being affixed to a specific point on the parent<br>object, pass in the location here. Defaults to None.</td>
<td>None</td>
</tr>
<tr>
<td>add_geom</td>
<td>bool</td>
<td>Whether or not to add a small sphere to visualize the positioning on the anchor.<br>Defaults to False.</td>
<td>None</td>
</tr>
<tr>
<td>geom_pos</td>
<td>Optional[npt.ArrayLike]</td>
<td>Position of the sphere in world frame, shape (3,).<br>Defaults to None, (in which case add_geom must also be None)</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tuple[int, Optional[int]]</td>
<td>int: The Pybullet ID for the anchor<br>Optional[int]: The Pybullet ID for the geometry (if add_geom is False, this is None)</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">create_anchor</span><span class="p">(</span>

<span class="w">    </span><span class="nl">soft_body_id</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span>

<span class="w">    </span><span class="nl">vertex_id</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span>

<span class="w">    </span><span class="nl">parent_id</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span>

<span class="w">    </span><span class="nl">link_id</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span>

<span class="w">    </span><span class="nl">parent_frame_pos</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">list[float</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">add_geom</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="p">,</span>

<span class="w">    </span><span class="nl">geom_pos</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">npt.ArrayLike</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tuple</span><span class="o">[</span><span class="n">int, Optional[int</span><span class="o">]</span><span class="err">]:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Creates an anchor between a softbody and another object (or the world)</span>

<span class="ss">    Args:</span>

<span class="ss">        soft_body_id (int): ID of the softbody in Pybullet</span>

<span class="ss">        vertex_id (int): Index of the mesh vertex on the softbody we are anchoring to</span>

<span class="ss">        parent_id (int): ID of the parent object in Pybullet. If anchoring to world, this will be -1</span>

<span class="ss">        link_id (int): Index of the link on the parent object. If the parent does not have links, use -1</span>

<span class="ss">        parent_frame_pos (Optional[list[float]]): If the anchor is being affixed to a specific point on the parent</span>

<span class="ss">            object, pass in the location here. Defaults to None.</span>

<span class="ss">        add_geom (bool, optional): Whether or not to add a small sphere to visualize the positioning on the anchor.</span>

<span class="ss">            Defaults to False.</span>

<span class="ss">        geom_pos (Optional[npt.ArrayLike]): Position of the sphere in world frame, shape (3,).</span>

<span class="ss">            Defaults to None, (in which case add_geom must also be None)</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Returns:</span>

<span class="ss">        tuple[int, Optional[int]]:</span>

<span class="ss">            int: The Pybullet ID for the anchor</span>

<span class="ss">            Optional[int]: The Pybullet ID for the geometry (if add_geom is False, this is None)</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">anchor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createSoftBodyAnchor</span><span class="p">(</span>

<span class="w">        </span><span class="n">soft_body_id</span><span class="p">,</span><span class="w"> </span><span class="n">vertex_id</span><span class="p">,</span><span class="w"> </span><span class="n">parent_id</span><span class="p">,</span><span class="w"> </span><span class="n">link_id</span><span class="p">,</span><span class="w"> </span><span class="n">parent_frame_pos</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">add_geom</span><span class="p">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">geom_pos</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span>

<span class="w">                </span><span class="ss">&quot;If visualizing the anchor, the world-position of the anchor must be included&quot;</span>

<span class="w">            </span><span class="p">)</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">collision</span><span class="o">-</span><span class="k">less</span><span class="w"> </span><span class="n">sphere</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">visualize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">anchor</span><span class="w"> </span><span class="k">position</span>

<span class="w">        </span><span class="n">geom_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_sphere</span><span class="p">(</span><span class="n">geom_pos</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="k">False</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">0, 1, 0, 0.5</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="k">Then</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">secondary</span><span class="w"> </span><span class="n">anchor</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">sphere</span><span class="w"> </span><span class="n">stays</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nf">right</span><span class="w"> </span><span class="n">place</span>

<span class="w">        </span><span class="n">geom_anchor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createSoftBodyAnchor</span><span class="p">(</span>

<span class="w">            </span><span class="n">soft_body_id</span><span class="p">,</span><span class="w"> </span><span class="n">vertex_id</span><span class="p">,</span><span class="w"> </span><span class="n">geom_id</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="err">:</span>

<span class="w">        </span><span class="n">geom_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">anchor_id</span><span class="p">,</span><span class="w"> </span><span class="n">geom_id</span>
</code></pre></div>

</details>
<h3 id="create_box">create_box</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">create_box</span><span class="p">(</span>
    <span class="n">pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">orn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">mass</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">sidelengths</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">use_collision</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">rgba</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

<p>Creates a rigid box in the Pybullet simulation</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>pos</td>
<td>npt.ArrayLike</td>
<td>Position of the box in world frame, shape (3)</td>
<td>None</td>
</tr>
<tr>
<td>orn</td>
<td>npt.ArrayLike</td>
<td>Orientation (XYZW quaternion) of the box in world frame, shape (4,)</td>
<td>None</td>
</tr>
<tr>
<td>mass</td>
<td>float</td>
<td>Mass of the box. If set to 0, the box is fixed in space</td>
<td>None</td>
</tr>
<tr>
<td>sidelengths</td>
<td>npt.ArrayLike</td>
<td>Sidelengths of the box along the local XYZ axes, shape (3,)</td>
<td>None</td>
</tr>
<tr>
<td>use_collision</td>
<td>bool</td>
<td>Whether or not collision is enabled for the box</td>
<td>None</td>
</tr>
<tr>
<td>rgba</td>
<td>npt.ArrayLike</td>
<td>Color of the box, with each RGBA value being in [0, 1].<br>Defaults to (1, 1, 1, 1) (white)</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>ID of the box in Pybullet</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">create_box</span><span class="p">(</span>

<span class="w">    </span><span class="nl">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">orn</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">mass</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="p">,</span>

<span class="w">    </span><span class="nl">sidelengths</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">use_collision</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="p">,</span>

<span class="w">    </span><span class="nl">rgba</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">int</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Creates a rigid box in the Pybullet simulation</span>

<span class="ss">    Args:</span>

<span class="ss">        pos (npt.ArrayLike): Position of the box in world frame, shape (3)</span>

<span class="ss">        orn (npt.ArrayLike): Orientation (XYZW quaternion) of the box in world frame, shape (4,)</span>

<span class="ss">        mass (float): Mass of the box. If set to 0, the box is fixed in space</span>

<span class="ss">        sidelengths (npt.ArrayLike): Sidelengths of the box along the local XYZ axes, shape (3,)</span>

<span class="ss">        use_collision (bool): Whether or not collision is enabled for the box</span>

<span class="ss">        rgba (npt.ArrayLike, optional): Color of the box, with each RGBA value being in [0, 1].</span>

<span class="ss">            Defaults to (1, 1, 1, 1) (white)</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Returns:</span>

<span class="ss">        int: ID of the box in Pybullet</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">sidelengths</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">3</span><span class="err">:</span>

<span class="w">        </span><span class="n">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span><span class="ss">&quot;Must provide the dimensions of the three sides of the box&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">half_extents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">sidelengths</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="n">visual_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createVisualShape</span><span class="p">(</span>

<span class="w">        </span><span class="n">pybullet</span><span class="p">.</span><span class="n">GEOM_BOX</span><span class="p">,</span>

<span class="w">        </span><span class="n">halfExtents</span><span class="o">=</span><span class="n">half_extents</span><span class="p">,</span>

<span class="w">        </span><span class="n">rgbaColor</span><span class="o">=</span><span class="n">rgba</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">use_collision</span><span class="p">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createCollisionShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">pybullet</span><span class="p">.</span><span class="n">GEOM_BOX</span><span class="p">,</span>

<span class="w">            </span><span class="n">halfExtents</span><span class="o">=</span><span class="n">half_extents</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="err">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="w">    </span><span class="n">box_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createMultiBody</span><span class="p">(</span>

<span class="w">        </span><span class="n">baseMass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">basePosition</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseOrientation</span><span class="o">=</span><span class="n">orn</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseCollisionShapeIndex</span><span class="o">=</span><span class="n">collision_id</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseVisualShapeIndex</span><span class="o">=</span><span class="n">visual_id</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">box_id</span>
</code></pre></div>

</details>
<h3 id="create_sphere">create_sphere</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">create_sphere</span><span class="p">(</span>
    <span class="n">pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]],</span>
    <span class="n">mass</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">use_collision</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">rgba</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

<p>Creates a rigid sphere in the Pybullet simulation</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>pos</td>
<td>npt.ArrayLike</td>
<td>Position of the sphere in world frame, shape (3)</td>
<td>None</td>
</tr>
<tr>
<td>mass</td>
<td>float</td>
<td>Mass of the sphere. If set to 0, the sphere is fixed in space</td>
<td>None</td>
</tr>
<tr>
<td>radius</td>
<td>float</td>
<td>Radius of the sphere</td>
<td>None</td>
</tr>
<tr>
<td>use_collision</td>
<td>bool</td>
<td>Whether or not collision is enabled for the sphere</td>
<td>None</td>
</tr>
<tr>
<td>rgba</td>
<td>npt.ArrayLike</td>
<td>Color of the sphere, with each RGBA value being in [0, 1].<br>Defaults to (1, 1, 1, 1) (white)</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>ID of the sphere in Pybullet</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">create_sphere</span><span class="p">(</span>

<span class="w">    </span><span class="nl">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="p">,</span>

<span class="w">    </span><span class="nl">mass</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="p">,</span>

<span class="w">    </span><span class="nl">radius</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="p">,</span>

<span class="w">    </span><span class="nl">use_collision</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="p">,</span>

<span class="w">    </span><span class="nl">rgba</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">int</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Creates a rigid sphere in the Pybullet simulation</span>

<span class="ss">    Args:</span>

<span class="ss">        pos (npt.ArrayLike): Position of the sphere in world frame, shape (3)</span>

<span class="ss">        mass (float): Mass of the sphere. If set to 0, the sphere is fixed in space</span>

<span class="ss">        radius (float): Radius of the sphere</span>

<span class="ss">        use_collision (bool): Whether or not collision is enabled for the sphere</span>

<span class="ss">        rgba (npt.ArrayLike, optional): Color of the sphere, with each RGBA value being in [0, 1].</span>

<span class="ss">            Defaults to (1, 1, 1, 1) (white)</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Returns:</span>

<span class="ss">        int: ID of the sphere in Pybullet</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">visual_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createVisualShape</span><span class="p">(</span>

<span class="w">        </span><span class="n">pybullet</span><span class="p">.</span><span class="n">GEOM_SPHERE</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span><span class="w"> </span><span class="n">rgbaColor</span><span class="o">=</span><span class="n">rgba</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nl">use_collision</span><span class="p">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createCollisionShape</span><span class="p">(</span><span class="n">pybullet</span><span class="p">.</span><span class="n">GEOM_SPHERE</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">)</span>

<span class="w">    </span><span class="k">else</span><span class="err">:</span>

<span class="w">        </span><span class="n">collision_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="w">    </span><span class="n">sphere_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">createMultiBody</span><span class="p">(</span>

<span class="w">        </span><span class="n">baseMass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">basePosition</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseCollisionShapeIndex</span><span class="o">=</span><span class="n">collision_id</span><span class="p">,</span>

<span class="w">        </span><span class="n">baseVisualShapeIndex</span><span class="o">=</span><span class="n">visual_id</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">sphere_id</span>
</code></pre></div>

</details>
<h3 id="initialize_pybullet">initialize_pybullet</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">initialize_pybullet</span><span class="p">(</span>
    <span class="n">use_gui</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">physics_freq</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">350</span><span class="p">,</span>
    <span class="n">gravity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;pybullet&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/home/dmorton/.pyenv/versions/3.10.8/envs/astrobee/lib/python3.10/site-packages/pybullet.cpython-310-x86_64-linux-gnu.so&#39;</span><span class="o">&gt;</span>
</code></pre></div>

<p>Starts a pybullet client with the required physics parameters we care about</p>
<p>NOTE: the client object returned from this function should ALWAYS be assigned to a variable
to keep the simulation in scope. i.e. don't just call initialize_pybullet(), use client = initialize_pybullet()
even if you're not worrying about multiple physics simulations</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>use_gui</td>
<td>bool</td>
<td>Whether or not to use the GUI as opposed to headless. Defaults to True</td>
<td>None</td>
</tr>
<tr>
<td>physics_freq</td>
<td>float</td>
<td>Physics simulation frequency, in Hz. Defaults to 350.<br>Note: Pybullet defaults to 240 Hz, but this seemed to be unstable for soft bodies</td>
<td>350</td>
</tr>
<tr>
<td>gravity</td>
<td>float</td>
<td>Z component of gravitational acceleration vector. Defaults to 0.</td>
<td>0</td>
</tr>
<tr>
<td>bg_color</td>
<td>npt.ArrayLike</td>
<td>RGB values for the GUI background, each in range [0, 1].<br>Defaults to (0.0, 0.0, 0.0) (black). Note: (1.0, 1.0, 1.0) is white</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>BulletClient</td>
<td>Pybullet physics simulation client</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">initialize_pybullet</span><span class="p">(</span>

<span class="w">    </span><span class="n">use_gui</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">True</span><span class="p">,</span>

<span class="w">    </span><span class="n">physics_freq</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">350</span><span class="p">,</span>

<span class="w">    </span><span class="n">gravity</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>

<span class="w">    </span><span class="n">bg_color</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="o">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pybullet</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;Starts a pybullet client with the required physics parameters we care about</span>

<span class="sd">    NOTE: the client object returned from this function should ALWAYS be assigned to a variable</span>

<span class="sd">    to keep the simulation in scope. i.e. don&#39;t just call initialize_pybullet(), use client = initialize_pybullet()</span>

<span class="sd">    even if you&#39;re not worrying about multiple physics simulations</span>

<span class="sd">    Args:</span>

<span class="sd">        use_gui (bool, optional): Whether or not to use the GUI as opposed to headless. Defaults to True</span>

<span class="sd">        physics_freq (float, optional): Physics simulation frequency, in Hz. Defaults to 350.</span>

<span class="sd">            Note: Pybullet defaults to 240 Hz, but this seemed to be unstable for soft bodies</span>

<span class="sd">        gravity (float, optional): Z component of gravitational acceleration vector. Defaults to 0.</span>

<span class="sd">        bg_color (npt.ArrayLike, optional): RGB values for the GUI background, each in range [0, 1].</span>

<span class="sd">            Defaults to (0.0, 0.0, 0.0) (black). Note: (1.0, 1.0, 1.0) is white</span>

<span class="sd">    Returns:</span>

<span class="sd">        BulletClient: Pybullet physics simulation client</span>

<span class="sd">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="c1"># Make sure we&#39;re in the right directory so filepaths work well with pybullet</span>

<span class="w">    </span><span class="n">cwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">cwd</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;pyastrobee&quot;</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">cwd</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;pyastrobee/pyastrobee&quot;</span><span class="p">):</span>

<span class="w">        </span><span class="n">raise</span><span class="w"> </span><span class="n">ConnectionRefusedError</span><span class="p">(</span>

<span class="w">            </span><span class="n">f</span><span class="s2">&quot;You are running scripts from {cwd}.</span><span class="se">\n</span><span class="s2">Ensure you&#39;re at the top-level pyastrobee directory.&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Ensure that the background color values are within the proper range</span>

<span class="w">    </span><span class="n">bg_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bg_color</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">bg_color</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="p">(</span><span class="n">all</span><span class="p">(</span><span class="n">bg_color</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all</span><span class="p">(</span><span class="n">bg_color</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">)):</span>

<span class="w">        </span><span class="n">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Invalid background color: {bg_color}&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">bg_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>

<span class="w">        </span><span class="n">f</span><span class="s2">&quot;--background_color_red={bg_color[0]} &quot;</span>

<span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="s2">&quot;--background_color_green={bg_color[1]} &quot;</span>

<span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="s2">&quot;--background_color_blue={bg_color[2]}&quot;</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Connect to pybullet</span>

<span class="w">    </span><span class="n">connection_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="o">.</span><span class="n">GUI</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">use_gui</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">pybullet</span><span class="o">.</span><span class="n">DIRECT</span>

<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BulletClient</span><span class="p">(</span><span class="n">connection_mode</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="o">=</span><span class="n">bg_args</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Configure physics</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">resetSimulation</span><span class="p">(</span><span class="n">pybullet</span><span class="o">.</span><span class="n">RESET_USE_DEFORMABLE_WORLD</span><span class="p">)</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setTimeStep</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">physics_freq</span><span class="p">)</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setGravity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">gravity</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Configure search paths</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setAdditionalSearchPath</span><span class="p">(</span><span class="n">pybullet_data</span><span class="o">.</span><span class="n">getDataPath</span><span class="p">())</span>

<span class="w">    </span><span class="c1"># client.setAdditionalSearchPath(os.path.join(os.getcwd(), &quot;pyastrobee/assets&quot;))</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">setAdditionalSearchPath</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Remove the extra windows in PyBullet GUI (until we use them for cameras).</span>

<span class="w">    </span><span class="n">client</span><span class="o">.</span><span class="n">configureDebugVisualizer</span><span class="p">(</span><span class="n">pybullet</span><span class="o">.</span><span class="n">COV_ENABLE_GUI</span><span class="p">,</span><span class="w"> </span><span class="n">False</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">client</span>
</code></pre></div>

</details>
<h3 id="load_deformable_object">load_deformable_object</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">load_deformable_object</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">texture_filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="n">orn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="n">mass</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">bending_stiffness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">50.0</span><span class="p">,</span>
    <span class="n">damping_stiffness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">elastic_stiffness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">50.0</span><span class="p">,</span>
    <span class="n">friction_coeff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">self_collision</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sim_file_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

<p>Loads a deformable object from an OBJ file</p>
<p>Notes: bending and elastic stiffness &gt;90 cause instabilities.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>str</td>
<td>Path to the deformable object to load</td>
<td>None</td>
</tr>
<tr>
<td>texture_filename</td>
<td>str</td>
<td>Path to a texture file to apply. Defaults to None, in which case no<br>texture will be applied</td>
<td>None</td>
</tr>
<tr>
<td>scale</td>
<td>float</td>
<td>Scaling factor for the loaded object. Defaults to 1.0.</td>
<td>1.0</td>
</tr>
<tr>
<td>pos</td>
<td>npt.ArrayLike</td>
<td>Initial position for the loaded object. Defaults to (0.0, 0.0, 0.0).</td>
<td>(0.0, 0.0, 0.0)</td>
</tr>
<tr>
<td>orn</td>
<td>npt.ArrayLike</td>
<td>Initial XYZW quaternion orientation. Defaults to (0, 0, 0, 1).</td>
<td>(0, 0, 0, 1)</td>
</tr>
<tr>
<td>mass</td>
<td>float</td>
<td>Mass of the loaded object. Defaults to 1.0 (Keeping at 1.0 is the most stable option).</td>
<td>1.0 (Keeping at 1.0 is the most stable option)</td>
</tr>
<tr>
<td>bending_stiffness</td>
<td>float</td>
<td>Bending stiffness of the loaded object. Defaults to 1.0.</td>
<td>1.0</td>
</tr>
<tr>
<td>damping_stiffness</td>
<td>float</td>
<td>Damping stiffness of the loaded object. Defaults to 0.1.</td>
<td>0.1</td>
</tr>
<tr>
<td>elastic_stiffness</td>
<td>float</td>
<td>Elastic stiffness of the loaded object. Defaults to 1.0.</td>
<td>1.0</td>
</tr>
<tr>
<td>friction_coeff</td>
<td>float</td>
<td>Friction coefficient of the loaded object. Defaults to 0.1.</td>
<td>0.1</td>
</tr>
<tr>
<td>self_collision</td>
<td>bool</td>
<td>Whether or not to allow self-collisions for the object. Defaults to False.<br>Note: setting this as True seemed to lead to mesh collapse</td>
<td>False</td>
</tr>
<tr>
<td>sim_file_name</td>
<td>str</td>
<td>This is an undocumented input to loadSoftBody, but it appears to allow you<br>to load an OBJ in the filename (for texture purposes) and a corresponding VTK in the simFileName for<br>volumetric softbody physics</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>ID number for the object</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">load_deformable_object</span><span class="p">(</span>

<span class="w">    </span><span class="nl">filename</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span>

<span class="w">    </span><span class="nl">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">scale</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>

<span class="w">    </span><span class="nl">orn</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span>

<span class="w">    </span><span class="nl">mass</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">bending_stiffness</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">damping_stiffness</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>

<span class="w">    </span><span class="nl">elastic_stiffness</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">friction_coeff</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>

<span class="w">    </span><span class="nl">self_collision</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="p">,</span>

<span class="w">    </span><span class="n">sim_file_name</span><span class="o">=</span><span class="ss">&quot;&quot;</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">int</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Loads a deformable object from an OBJ file</span>

<span class="ss">    Notes: bending and elastic stiffness &gt;90 cause instabilities.</span>

<span class="ss">    Args:</span>

<span class="ss">        filename (str): Path to the deformable object to load</span>

<span class="ss">        texture_filename (str, optional): Path to a texture file to apply. Defaults to None, in which case no</span>

<span class="ss">            texture will be applied</span>

<span class="ss">        scale (float, optional): Scaling factor for the loaded object. Defaults to 1.0.</span>

<span class="ss">        pos (npt.ArrayLike, optional): Initial position for the loaded object. Defaults to (0.0, 0.0, 0.0).</span>

<span class="ss">        orn (npt.ArrayLike, optional): Initial XYZW quaternion orientation. Defaults to (0, 0, 0, 1).</span>

<span class="ss">        mass (float, optional): Mass of the loaded object. Defaults to 1.0 (Keeping at 1.0 is the most stable option).</span>

<span class="ss">        bending_stiffness (float, optional): Bending stiffness of the loaded object. Defaults to 1.0.</span>

<span class="ss">        damping_stiffness (float, optional): Damping stiffness of the loaded object. Defaults to 0.1.</span>

<span class="ss">        elastic_stiffness (float, optional): Elastic stiffness of the loaded object. Defaults to 1.0.</span>

<span class="ss">        friction_coeff (float, optional): Friction coefficient of the loaded object. Defaults to 0.1.</span>

<span class="ss">        self_collision (bool, optional): Whether or not to allow self-collisions for the object. Defaults to False.</span>

<span class="ss">            Note: setting this as True seemed to lead to mesh collapse</span>

<span class="ss">        sim_file_name (str, optional): This is an undocumented input to loadSoftBody, but it appears to allow you</span>

<span class="ss">            to load an OBJ in the filename (for texture purposes) and a corresponding VTK in the simFileName for</span>

<span class="ss">            volumetric softbody physics</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Returns:</span>

<span class="ss">        int: ID number for the object</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">mass</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.0</span><span class="err">:</span>

<span class="w">        </span><span class="n">print_red</span><span class="p">(</span>

<span class="w">            </span><span class="ss">&quot;Warning: mass &gt; 1 is the most stable for deformables. Small mass can cause instabilities&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nl">TODO</span><span class="p">:</span><span class="w"> </span><span class="n">decide</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">some</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="k">parameters</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">inputs</span><span class="w"> </span><span class="n">rather</span><span class="w"> </span><span class="k">than</span><span class="w"> </span><span class="n">hard</span><span class="o">-</span><span class="n">coded</span>

<span class="w">    </span><span class="n">deform_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">loadSoftBody</span><span class="p">(</span>

<span class="w">        </span><span class="n">mass</span><span class="o">=</span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>

<span class="w">        </span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>

<span class="w">        </span><span class="n">basePosition</span><span class="o">=</span><span class="n">list</span><span class="p">(</span><span class="n">pos</span><span class="p">),</span>

<span class="w">        </span><span class="n">baseOrientation</span><span class="o">=</span><span class="n">list</span><span class="p">(</span><span class="n">orn</span><span class="p">),</span>

<span class="w">        </span><span class="n">springElasticStiffness</span><span class="o">=</span><span class="n">elastic_stiffness</span><span class="p">,</span>

<span class="w">        </span><span class="n">springDampingStiffness</span><span class="o">=</span><span class="n">damping_stiffness</span><span class="p">,</span>

<span class="w">        </span><span class="n">springBendingStiffness</span><span class="o">=</span><span class="n">bending_stiffness</span><span class="p">,</span>

<span class="w">        </span><span class="n">frictionCoeff</span><span class="o">=</span><span class="n">friction_coeff</span><span class="p">,</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">collisionMargin</span><span class="o">=</span><span class="mf">0.003</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">apart</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span><span class="n">interacting</span>

<span class="w">        </span><span class="n">useSelfCollision</span><span class="o">=</span><span class="n">self_collision</span><span class="p">,</span>

<span class="w">        </span><span class="n">springDampingAllDirections</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>

<span class="w">        </span><span class="n">useFaceContact</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>

<span class="w">        </span><span class="n">useNeoHookean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>

<span class="w">        </span><span class="n">useMassSpring</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>

<span class="w">        </span><span class="n">useBendingSprings</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">repulsionStiffness</span><span class="o">=</span><span class="mi">10000000</span><span class="p">,</span>

<span class="w">        </span><span class="n">simFileName</span><span class="o">=</span><span class="n">sim_file_name</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">TODO</span><span class="w"> </span><span class="n">figure</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">sparseSdfVoxelSize</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="n">actually</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="p">(</span><span class="n">it</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">documented</span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">See</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="n">examples</span><span class="o">/</span><span class="n">deformable_anchor</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="k">usage</span><span class="w"> </span><span class="n">there</span>

<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">setPhysicsEngineParameter</span><span class="p">(</span><span class="n">sparseSdfVoxelSize</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">texture_filename</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">        </span><span class="n">add_texture_to_deformable</span><span class="p">(</span><span class="n">deform_id</span><span class="p">,</span><span class="w"> </span><span class="n">texture_filename</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Validate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">size</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mesh</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">assure</span><span class="w"> </span><span class="n">stability</span>

<span class="w">    </span><span class="n">num_mesh_vertices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_mesh_data</span><span class="p">(</span><span class="n">deform_id</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)</span><span class="o">[</span><span class="n">0</span><span class="o">]</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">num_mesh_vertices</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="mi">13</span><span class="err">:</span>

<span class="w">        </span><span class="n">print_red</span><span class="p">(</span>

<span class="w">            </span><span class="n">f</span><span class="ss">&quot;Warning: high number of mesh vertices: {num_mesh_vertices}. Consider a lower-res mesh&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">deform_id</span>
</code></pre></div>

</details>
<h3 id="load_floor">load_floor</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">load_floor</span><span class="p">(</span>
    <span class="n">texture_filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">z_pos</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

<p>Loads a floor into the pybullet simulation</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>texture_filename</td>
<td>str</td>
<td>If adding a texture to the floor plane, pass in the filename.<br>Defaults to None.</td>
<td>None</td>
</tr>
<tr>
<td>z_pos</td>
<td>float</td>
<td>Height (z-coordinate) of the floor in the world. Defaults to 0.0</td>
<td>0</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>Pybullet ID corresponding to the floor</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">load_floor</span><span class="p">(</span>

<span class="w">    </span><span class="nl">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">z_pos</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">int</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Loads a floor into the pybullet simulation</span>

<span class="ss">    Args:</span>

<span class="ss">        texture_filename (str, optional): If adding a texture to the floor plane, pass in the filename.</span>

<span class="ss">            Defaults to None.</span>

<span class="ss">        z_pos (float, optional): Height (z-coordinate) of the floor in the world. Defaults to 0.0</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Returns:</span>

<span class="ss">        int: Pybullet ID corresponding to the floor</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">setAdditionalSearchPath</span><span class="p">(</span><span class="n">pybullet_data</span><span class="p">.</span><span class="n">getDataPath</span><span class="p">())</span>

<span class="w">    </span><span class="n">floor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">loadURDF</span><span class="p">(</span><span class="ss">&quot;plane.urdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">basePosition</span><span class="o">=[</span><span class="n">0, 0, z_pos</span><span class="o">]</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">texture_filename</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">        </span><span class="n">texture_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">loadTexture</span><span class="p">(</span><span class="n">texture_filename</span><span class="p">)</span>

<span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="n">changeVisualShape</span><span class="p">(</span>

<span class="w">            </span><span class="n">floor_id</span><span class="p">,</span>

<span class="w">            </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>

<span class="w">            </span><span class="n">rgbaColor</span><span class="o">=[</span><span class="n">1, 1, 1, 0</span><span class="o">]</span><span class="p">,</span>

<span class="w">            </span><span class="n">textureUniqueId</span><span class="o">=</span><span class="n">texture_id</span><span class="p">,</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">floor_id</span>
</code></pre></div>

</details>
<h3 id="load_rigid_object">load_rigid_object</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">load_rigid_object</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">texture_filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="n">orn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="n">mass</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">fixed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">rgba</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_array_like</span><span class="o">.</span><span class="n">_SupportsArray</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">_typing</span><span class="o">.</span><span class="n">_nested_sequence</span><span class="o">.</span><span class="n">_NestedSequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

<p>Loads a rigid object from an OBJ or URDF file</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>str</td>
<td>Path to the OBJ/URDF file to load</td>
<td>None</td>
</tr>
<tr>
<td>texture_filename</td>
<td>str</td>
<td>Path to a texture file to apply. Defaults to None, in which case no<br>texture will be applied</td>
<td>None</td>
</tr>
<tr>
<td>scale</td>
<td>float</td>
<td>Scaling factor for the loaded object. Defaults to 1.0.</td>
<td>1.0</td>
</tr>
<tr>
<td>pos</td>
<td>npt.ArrayLike</td>
<td>Initial position for the loaded object. Defaults to (0, 0, 0).</td>
<td>(0, 0, 0)</td>
</tr>
<tr>
<td>orn</td>
<td>npt.ArrayLike</td>
<td>Initial XYZW quaternion orientation. Defaults to (0, 0, 0, 1).</td>
<td>(0, 0, 0, 1)</td>
</tr>
<tr>
<td>mass</td>
<td>float</td>
<td>Mass of the loaded object. Defaults to 1.0.</td>
<td>1.0</td>
</tr>
<tr>
<td>fixed</td>
<td>bool</td>
<td>Whether or not to fix the object in space. Defaults to False.</td>
<td>False</td>
</tr>
<tr>
<td>rgba</td>
<td>npt.ArrayLike</td>
<td>Color of the object, expressed as RGBA, each within range [0, 1].<br>Defaults to (1.0, 1.0, 1.0, 1.0) (white).</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>ID number for the object</td>
</tr>
</tbody>
</table>
<p><strong>Raises:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ValueError</td>
<td>If the filename is not a valid OBJ or URDF</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">load_rigid_object</span><span class="p">(</span>

<span class="w">    </span><span class="nl">filename</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span>

<span class="w">    </span><span class="nl">texture_filename</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">scale</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">pos</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span>

<span class="w">    </span><span class="nl">orn</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span>

<span class="w">    </span><span class="nl">mass</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">    </span><span class="nl">fixed</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="p">,</span>

<span class="w">    </span><span class="nl">rgba</span><span class="p">:</span><span class="w"> </span><span class="n">npt</span><span class="p">.</span><span class="n">ArrayLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">int</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Loads a rigid object from an OBJ or URDF file</span>

<span class="ss">    Args:</span>

<span class="ss">        filename (str): Path to the OBJ/URDF file to load</span>

<span class="ss">        texture_filename (str, optional): Path to a texture file to apply. Defaults to None, in which case no</span>

<span class="ss">            texture will be applied</span>

<span class="ss">        scale (float, optional): Scaling factor for the loaded object. Defaults to 1.0.</span>

<span class="ss">        pos (npt.ArrayLike, optional): Initial position for the loaded object. Defaults to (0, 0, 0).</span>

<span class="ss">        orn (npt.ArrayLike, optional): Initial XYZW quaternion orientation. Defaults to (0, 0, 0, 1).</span>

<span class="ss">        mass (float, optional): Mass of the loaded object. Defaults to 1.0.</span>

<span class="ss">        fixed (bool, optional): Whether or not to fix the object in space. Defaults to False.</span>

<span class="ss">        rgba (npt.ArrayLike, optional): Color of the object, expressed as RGBA, each within range [0, 1].</span>

<span class="ss">            Defaults to (1.0, 1.0, 1.0, 1.0) (white).</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Raises:</span>

<span class="ss">        ValueError: If the filename is not a valid OBJ or URDF</span>

<span class="ss">    Returns:</span>

<span class="ss">        int: ID number for the object</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Deal</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">pybullet</span><span class="s1">&#39;s weird handling of mass = 0 being fixed</span>

<span class="s1">    if mass &lt; 0:</span>

<span class="s1">        raise ValueError(&quot;Mass should not be a negative value&quot;)</span>

<span class="s1">    if mass == 0:</span>

<span class="s1">        print_red(</span>

<span class="s1">            f&quot;Warning: the mass of {filename} is 0, which will make it fixed. Use the &#39;</span><span class="n">fixed</span><span class="err">&#39;</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="n">instead</span><span class="ss">&quot;</span>

<span class="ss">        )</span>

<span class="ss">    if fixed:</span>

<span class="ss">        mass = 0.0</span>

<span class="ss">    if filename.endswith(&quot;</span><span class="p">.</span><span class="n">obj</span><span class="ss">&quot;):  # mesh info</span>

<span class="ss">        xyz_scale = [scale, scale, scale]</span>

<span class="ss">        visual_id = client.createVisualShape(</span>

<span class="ss">            shapeType=pybullet.GEOM_MESH,</span>

<span class="ss">            rgbaColor=rgba,</span>

<span class="ss">            fileName=filename,</span>

<span class="ss">            meshScale=xyz_scale,</span>

<span class="ss">        )</span>

<span class="ss">        collision_id = client.createCollisionShape(</span>

<span class="ss">            shapeType=pybullet.GEOM_MESH, fileName=filename, meshScale=xyz_scale</span>

<span class="ss">        )</span>

<span class="ss">        rigid_id = client.createMultiBody(</span>

<span class="ss">            baseMass=mass,  # mass==0 =&gt; fixed at position where it is loaded</span>

<span class="ss">            basePosition=pos,</span>

<span class="ss">            baseCollisionShapeIndex=collision_id,</span>

<span class="ss">            baseVisualShapeIndex=visual_id,</span>

<span class="ss">            baseOrientation=orn,</span>

<span class="ss">        )</span>

<span class="ss">    elif filename.endswith(&quot;</span><span class="p">.</span><span class="n">urdf</span><span class="ss">&quot;):  # URDF file</span>

<span class="ss">        rigid_id = client.loadURDF(</span>

<span class="ss">            filename,</span>

<span class="ss">            pos,</span>

<span class="ss">            orn,</span>

<span class="ss">            useFixedBase=fixed,</span>

<span class="ss">            globalScaling=scale,</span>

<span class="ss">        )</span>

<span class="ss">    else:</span>

<span class="ss">        raise ValueError(</span>

<span class="ss">            f&quot;</span><span class="n">Invalid</span><span class="w"> </span><span class="nl">filename</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="n">filename</span><span class="err">}</span><span class="p">.</span><span class="w"> </span><span class="n">Import</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">OBJ</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">URDF</span><span class="w"> </span><span class="k">file</span><span class="err">&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nl">TODO</span><span class="p">:</span><span class="w"> </span><span class="n">decide</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="k">parameters</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">inputs</span><span class="w"> </span><span class="n">rather</span><span class="w"> </span><span class="k">than</span><span class="w"> </span><span class="n">hard</span><span class="o">-</span><span class="n">coded</span>

<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">changeDynamics</span><span class="p">(</span>

<span class="w">        </span><span class="n">rigid_id</span><span class="p">,</span>

<span class="w">        </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>

<span class="w">        </span><span class="n">mass</span><span class="p">,</span>

<span class="w">        </span><span class="n">lateralFriction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">        </span><span class="n">spinningFriction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">        </span><span class="n">rollingFriction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>

<span class="w">        </span><span class="n">restitution</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>

<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">texture_filename</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">        </span><span class="n">add_texture_to_rigid</span><span class="p">(</span><span class="n">rigid_id</span><span class="p">,</span><span class="w"> </span><span class="n">texture_filename</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">rigid_id</span>
</code></pre></div>

</details>
<h3 id="playback_from_log">playback_from_log</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">playback_from_log</span><span class="p">(</span>
    <span class="n">log_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">real_time</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

<p>Reads a log file and then replays that logged simulation</p>
<p>We assume that the environment has been set up the same way as the original environment
when the logging occurred. If this is not the case, it can lead to odd results</p>
<p>The logs also contain a lot more info like velocities and torques, but we don't really need
this information to play things back (simply resetting pose will appear correct)</p>
<p>This code is modified from bullet3/examples/pybullet/examples/kuka_with_cube_playback.py</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>log_file</td>
<td>str</td>
<td>Filename for the saved log</td>
<td>None</td>
</tr>
<tr>
<td>real_time</td>
<td>bool</td>
<td>Whether to play back the log in real time (according to the timestamps saved in<br>the log). Defaults to True. If False, things will be very speedy</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">playback_from_log</span><span class="p">(</span>

<span class="w">    </span><span class="nl">log_file</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span>

<span class="w">    </span><span class="nl">real_time</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Reads a log file and then replays that logged simulation</span>

<span class="ss">    We assume that the environment has been set up the same way as the original environment</span>

<span class="ss">    when the logging occurred. If this is not the case, it can lead to odd results</span>

<span class="ss">    The logs also contain a lot more info like velocities and torques, but we don&#39;t really need</span>

<span class="ss">    this information to play things back (simply resetting pose will appear correct)</span>

<span class="ss">    This code is modified from bullet3/examples/pybullet/examples/kuka_with_cube_playback.py</span>

<span class="ss">    Args:</span>

<span class="ss">        log_file (str): Filename for the saved log</span>

<span class="ss">        real_time (bool, optional): Whether to play back the log in real time (according to the timestamps saved in</span>

<span class="ss">            the log). Defaults to True. If False, things will be very speedy</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="nf">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_log_file</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>

<span class="w">    </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">time</span><span class="p">.</span><span class="nc">time</span><span class="p">()</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nf">log</span><span class="err">:</span>

<span class="w">        </span><span class="nc">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="o">[</span><span class="n">1</span><span class="o">]</span>

<span class="w">        </span><span class="n">uid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="o">[</span><span class="n">2</span><span class="o">]</span>

<span class="w">        </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="o">[</span><span class="n">3:6</span><span class="o">]</span>

<span class="w">        </span><span class="n">orn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">record</span><span class="o">[</span><span class="n">6:10</span><span class="o">]</span>

<span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="n">resetBasePositionAndOrientation</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">orn</span><span class="p">)</span>

<span class="w">        </span><span class="n">num_joints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getNumJoints</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="n">num_joints</span><span class="p">)</span><span class="err">:</span>

<span class="w">            </span><span class="n">joint_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getJointInfo</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>

<span class="w">            </span><span class="n">q_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">joint_info</span><span class="o">[</span><span class="n">3</span><span class="o">]</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">q_index</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="err">:</span>

<span class="w">                </span><span class="n">client</span><span class="p">.</span><span class="n">resetJointState</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">record</span><span class="o">[</span><span class="n">q_index - 7 + 17</span><span class="o">]</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nl">real_time</span><span class="p">:</span>

<span class="w">            </span><span class="nc">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="nf">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nc">timestamp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">time</span><span class="p">.</span><span class="nc">time</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">start_time</span><span class="p">))</span>
</code></pre></div>

</details>
<h3 id="read_log_file">read_log_file</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">read_log_file</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]</span>
</code></pre></div>

<p>Reads a Pybullet state log for generic robots and objects</p>
<p>We assume that when generating the log:
- The loggingType was set to STATE_LOGGING_GENERIC_ROBOT
- No softbodies were included in the logged items
- The maxLogDof is left at the default value (12)</p>
<p>This code is modified from bullet3/examples/pybullet/examples/kuka_with_cube_playback.py</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>str</td>
<td>Filename for the saved log</td>
<td>None</td>
</tr>
<tr>
<td>verbose</td>
<td>bool</td>
<td>Whether to print info about the log when reading. Defaults to False.</td>
<td>False</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>list[list[Union[int, float]]]</td>
<td>The Pybullet log.<br>Length is (number of timesteps) * (number of objects logged)<br>If multiple objects are logged, there will be multiple consecutive log entries for the same timestep<br>Each record in the log contains the following info:<br>    step_count = record[0]<br>    timestamp = record[1]<br>    unique_id = record[2]<br>    position = record[3:6]<br>    orientation = record[6:10]<br>    velocity = record[10:13]<br>    angular_velocity = record[13:16]<br>    num_joints = record[16]<br>    joint_positions = record[17 : 17 + max_log_dof]<br>    joint_torques = record[17 + max_log_dof :]</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">read_log_file</span><span class="p">(</span>

<span class="w">    </span><span class="nl">filename</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">,</span><span class="w"> </span><span class="nl">verbose</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span>

<span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">list[Union[int, float</span><span class="o">]</span><span class="err">]]:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Reads a Pybullet state log for generic robots and objects</span>

<span class="ss">    We assume that when generating the log:</span>

<span class="ss">    - The loggingType was set to STATE_LOGGING_GENERIC_ROBOT</span>

<span class="ss">    - No softbodies were included in the logged items</span>

<span class="ss">    - The maxLogDof is left at the default value (12)</span>

<span class="ss">    This code is modified from bullet3/examples/pybullet/examples/kuka_with_cube_playback.py</span>

<span class="ss">    Args:</span>

<span class="ss">        filename (str): Filename for the saved log</span>

<span class="ss">        verbose (bool, optional): Whether to print info about the log when reading. Defaults to False.</span>

<span class="ss">    Returns:</span>

<span class="ss">        list[list[Union[int, float]]]: The Pybullet log.</span>

<span class="ss">            Length is (number of timesteps) * (number of objects logged)</span>

<span class="ss">            If multiple objects are logged, there will be multiple consecutive log entries for the same timestep</span>

<span class="ss">            Each record in the log contains the following info:</span>

<span class="ss">                step_count = record[0]</span>

<span class="ss">                timestamp = record[1]</span>

<span class="ss">                unique_id = record[2]</span>

<span class="ss">                position = record[3:6]</span>

<span class="ss">                orientation = record[6:10]</span>

<span class="ss">                velocity = record[10:13]</span>

<span class="ss">                angular_velocity = record[13:16]</span>

<span class="ss">                num_joints = record[16]</span>

<span class="ss">                joint_positions = record[17 : 17 + max_log_dof]</span>

<span class="ss">                joint_torques = record[17 + max_log_dof :]</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="k">with</span><span class="w"> </span><span class="k">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;rb&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nl">f</span><span class="p">:</span>

<span class="w">        </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">readline</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="ss">&quot;utf8&quot;</span><span class="p">).</span><span class="n">rstrip</span><span class="p">(</span><span class="ss">&quot;\n&quot;</span><span class="p">).</span><span class="n">split</span><span class="p">(</span><span class="ss">&quot;,&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="n">fmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">readline</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="ss">&quot;utf8&quot;</span><span class="p">).</span><span class="n">rstrip</span><span class="p">(</span><span class="ss">&quot;\n&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">record</span>

<span class="w">        </span><span class="n">sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">struct</span><span class="p">.</span><span class="n">calcsize</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">record</span>

<span class="w">        </span><span class="n">ncols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

<span class="w">        </span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>

<span class="w">            </span><span class="ss">&quot;filename&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span>

<span class="w">            </span><span class="ss">&quot;keys&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span>

<span class="w">            </span><span class="ss">&quot;format&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">fmt</span><span class="p">,</span>

<span class="w">            </span><span class="ss">&quot;size&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">sz</span><span class="p">,</span>

<span class="w">            </span><span class="ss">&quot;columns&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">ncols</span><span class="p">,</span>

<span class="w">        </span><span class="err">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nl">verbose</span><span class="p">:</span>

<span class="w">            </span><span class="k">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>

<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="k">Read</span><span class="w"> </span><span class="k">data</span>

<span class="w">        </span><span class="n">whole_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="k">read</span><span class="p">()</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">split</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">alignment</span><span class="w"> </span><span class="n">word</span>

<span class="w">    </span><span class="n">chunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">whole_file</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">b</span><span class="ss">&quot;\xaa\xbb&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nf">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">chunks</span><span class="p">:</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nl">sz</span><span class="p">:</span>

<span class="w">            </span><span class="k">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">struct</span><span class="p">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span><span class="w"> </span><span class="n">chunk</span><span class="p">)</span>

<span class="w">            </span><span class="n">record</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="n">ncols</span><span class="p">)</span><span class="err">:</span>

<span class="w">                </span><span class="n">record</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="k">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">log</span>
</code></pre></div>

</details>
<h3 id="run_sim">run_sim</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">run_sim</span><span class="p">(</span>
    <span class="n">viz_freq</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">240</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pybullet_utils</span><span class="o">.</span><span class="n">bullet_client</span><span class="o">.</span><span class="n">BulletClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

<p>Runs the pybullet simulation</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>viz_freq</td>
<td>float</td>
<td>Frequency (Hz) to run the visualization (if connected via GUI). Defaults to 240.</td>
<td>240</td>
</tr>
<tr>
<td>timeout</td>
<td>float</td>
<td>Amount of time to run the simulation. Defaults to None, in which case the simulation<br>will remain open until it is killed manually.</td>
<td>None</td>
</tr>
<tr>
<td>client</td>
<td>BulletClient</td>
<td>If connecting to multiple physics servers, include the client<br>(the class instance, not just the ID) here. Defaults to None (use default connected client)</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Raises:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ConnectionError</td>
<td>If a pybullet client is not currently running</td>
</tr>
<tr>
<td>ValueError</td>
<td>If the visualization frequency is greater than the physics frequency</td>
</tr>
</tbody>
</table>
<details class="example">
<summary>View Source</summary>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">run_sim</span><span class="p">(</span>

<span class="w">    </span><span class="nl">viz_freq</span><span class="p">:</span><span class="w"> </span><span class="nc">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span>

<span class="w">    </span><span class="nl">timeout</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">float</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">BulletClient</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span>

<span class="p">)</span><span class="err">:</span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Runs the pybullet simulation</span>

<span class="ss">    Args:</span>

<span class="ss">        viz_freq (float, optional): Frequency (Hz) to run the visualization (if connected via GUI). Defaults to 240.</span>

<span class="ss">        timeout (float, optional): Amount of time to run the simulation. Defaults to None, in which case the simulation</span>

<span class="ss">            will remain open until it is killed manually.</span>

<span class="ss">        client (BulletClient, optional): If connecting to multiple physics servers, include the client</span>

<span class="ss">            (the class instance, not just the ID) here. Defaults to None (use default connected client)</span>

<span class="ss">    Raises:</span>

<span class="ss">        ConnectionError: If a pybullet client is not currently running</span>

<span class="ss">        ValueError: If the visualization frequency is greater than the physics frequency</span>

<span class="ss">    &quot;&quot;&quot;</span>

<span class="w">    </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pybullet</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">client</span>

<span class="w">    </span><span class="nl">connect_info</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="o">[</span><span class="n">str, int</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getConnectionInfo</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">connect_info</span><span class="o">[</span><span class="n">&quot;isConnected&quot;</span><span class="o">]</span><span class="err">:</span>

<span class="w">        </span><span class="n">raise</span><span class="w"> </span><span class="n">ConnectionError</span><span class="p">(</span><span class="ss">&quot;Connect to a pybullet client before running the sim&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">connect_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;GUI&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">connect_info</span><span class="o">[</span><span class="n">&quot;connectionMethod&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="ss">&quot;DIRECT&quot;</span>

<span class="w">    </span><span class="n">phys_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">getPhysicsEngineParameters</span><span class="p">()</span>

<span class="w">    </span><span class="n">phys_freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">phys_info</span><span class="o">[</span><span class="n">&quot;fixedTimeStep&quot;</span><span class="o">]</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">viz_freq</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nl">phys_freq</span><span class="p">:</span>

<span class="w">        </span><span class="n">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span>

<span class="w">            </span><span class="n">f</span><span class="ss">&quot;Cannot visualize ({viz_freq} Hz) faster than the physics ({phys_freq} Hz)&quot;</span>

<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">timeout</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>

<span class="w">        </span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">float</span><span class="p">(</span><span class="ss">&quot;inf&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">time</span><span class="p">.</span><span class="nc">time</span><span class="p">()</span>

<span class="w">    </span><span class="k">try</span><span class="err">:</span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nc">time</span><span class="p">.</span><span class="nc">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">timeout</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">isConnected</span><span class="p">()</span><span class="err">:</span>

<span class="w">            </span><span class="n">client</span><span class="p">.</span><span class="n">stepSimulation</span><span class="p">()</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">connect_mode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;GUI&quot;</span><span class="err">:</span>

<span class="w">                </span><span class="nc">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">viz_freq</span><span class="p">)</span>

<span class="w">    </span><span class="nl">finally</span><span class="p">:</span>

<span class="w">        </span><span class="n">client</span><span class="p">.</span><span class="k">disconnect</span><span class="p">()</span>
</code></pre></div>

</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        
<footer class="md-footer">
    
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../boxes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Boxes" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
                Boxes
              </div>
            </div>
          </a>
        
        
          
          <a href="../debug_visualizer/" class="md-footer__link md-footer__link--next" aria-label="Next: Debug Visualizer" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
                Debug Visualizer
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
            
            Powered by
            <a href="http://timothycrosley.github.io/portray">portray.</a>
            You too can
            <a href="http://timothycrosley.github.io/portray">
              portray</a>
            your Python project well using automatic documentation.
          </div>
        
      </div>
    </div>
  </footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>